(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["otherpages-member-address_edit-address_edit"],{"06c5":function(e,t,r){"use strict";r("a630"),r("fb6a"),r("d3b7"),r("25f0"),r("3ca3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a=i(r("6b75"));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(e){if("string"===typeof e)return(0,a.default)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,a.default)(e,t):void 0}}},"09f0":function(e,t,r){"use strict";function a(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,i=!1,n=void 0;try{for(var s,u=e[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)if(r.push(s.value),t&&r.length===t)break}catch(o){i=!0,n=o}finally{try{a||null==u["return"]||u["return"]()}finally{if(i)throw n}}return r}}r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"0d21":function(e,t,r){"use strict";function a(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"0de0":function(e,t,r){r("c975"),r("a9e3"),r("4d63"),r("ac1f"),r("25f0"),r("1276"),e.exports={error:"",check:function(e,t){for(var r=0;r<t.length;r++){if(!t[r].checkType)return!0;if(!t[r].name)return!0;if(!t[r].errorMsg)return!0;if(!e[t[r].name])return this.error=t[r].errorMsg,!1;switch(t[r].checkType){case"custom":if("function"==typeof t[r].validate&&!t[r].validate(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"required":var a=new RegExp("/[S]+/");if(a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"string":a=new RegExp("^.{"+t[r].checkRule+"}$");if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"int":a=new RegExp("^(-[1-9]|[1-9])[0-9]{"+t[r].checkRule+"}$");if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"between":if(!this.isNumber(e[t[r].name]))return this.error=t[r].errorMsg,!1;var i=t[r].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[t[r].name]>i[1]||e[t[r].name]<i[0])return this.error=t[r].errorMsg,!1;break;case"betweenD":a=/^-?[1-9][0-9]?$/;if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;i=t[r].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[t[r].name]>i[1]||e[t[r].name]<i[0])return this.error=t[r].errorMsg,!1;break;case"betweenF":a=/^-?[0-9][0-9]?.+[0-9]+$/;if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;i=t[r].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[t[r].name]>i[1]||e[t[r].name]<i[0])return this.error=t[r].errorMsg,!1;break;case"same":if(e[t[r].name]!=t[r].checkRule)return this.error=t[r].errorMsg,!1;break;case"notsame":if(e[t[r].name]==t[r].checkRule)return this.error=t[r].errorMsg,!1;break;case"email":a=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"phoneno":a=/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/;if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"zipcode":a=/^[0-9]{6}$/;if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"reg":a=new RegExp(t[r].checkRule);if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"in":if(-1==t[r].checkRule.indexOf(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"notnull":if(0==e[t[r].name]||void 0==e[t[r].name]||null==e[t[r].name]||e[t[r].name].length<1)return this.error=t[r].errorMsg,!1;break;case"lengthMin":if(e[t[r].name].length<t[r].checkRule)return this.error=t[r].errorMsg,!1;break;case"lengthMax":if(e[t[r].name].length>t[r].checkRule)return this.error=t[r].errorMsg,!1;break}}return!0},isNumber:function(e){var t=/^-?[1-9][0-9]?.?[0-9]*$/;return t.test(e)}}},1412:function(e,t,r){"use strict";var a=r("ce07"),i=r.n(a);i.a},"296f":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return a}));var a={pickRegions:r("f6fd").default,loadingCover:r("1ba8").default},i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{class:e.themeStyle},[r("v-uni-view",{staticClass:"address-edit-content"},[r("v-uni-view",{staticClass:"edit-wrap"},[r("v-uni-view",{staticClass:"edit-item"},[r("v-uni-text",{staticClass:"tit"},[e._v(e._s(e.$lang("consignee")))]),r("v-uni-input",{staticClass:"uni-input",attrs:{type:"text",placeholder:e.$lang("consigneePlaceholder"),maxlength:"30",name:"name",value:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),r("v-uni-view",{staticClass:"edit-item"},[r("v-uni-text",{staticClass:"tit"},[e._v(e._s(e.$lang("mobile")))]),r("v-uni-input",{staticClass:"uni-input",attrs:{type:"number",placeholder:e.$lang("mobilePlaceholder"),maxlength:"11",value:""},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1),r("v-uni-view",{staticClass:"edit-item"},[r("v-uni-text",{staticClass:"tit"},[e._v(e._s(e.$lang("telephone")))]),r("v-uni-input",{staticClass:"uni-input",attrs:{type:"text",placeholder:e.$lang("telephonePlaceholder"),maxlength:"20",value:""},model:{value:e.formData.telephone,callback:function(t){e.$set(e.formData,"telephone",t)},expression:"formData.telephone"}})],1),r("v-uni-view",{staticClass:"edit-item"},[r("v-uni-text",{staticClass:"tit"},[e._v(e._s(e.$lang("receivingCity")))]),r("pick-regions",{attrs:{"default-regions":e.defaultRegions},on:{getRegions:function(t){arguments[0]=t=e.$handleEvent(t),e.handleGetRegions.apply(void 0,arguments)}}},[r("v-uni-text",{staticClass:"select-address",class:{empty:!e.formData.full_address}},[e._v(e._s(e.formData.full_address?e.formData.full_address:"请选择省市区县"))])],1)],1),r("v-uni-view",{staticClass:"edit-item"},[r("v-uni-text",{staticClass:"tit"},[e._v(e._s(e.$lang("address")))]),r("v-uni-input",{staticClass:"uni-input",attrs:{type:"text",placeholder:e.$lang("addressPlaceholder"),maxlength:"50"},model:{value:e.formData.address,callback:function(t){e.$set(e.formData,"address",t)},expression:"formData.address"}})],1)],1),r("v-uni-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.saveAddress.apply(void 0,arguments)}}},[e._v(e._s(e.$lang("save")))]),r("loading-cover",{ref:"loadingCover"})],1)],1)},n=[]},3099:function(e,t,r){"use strict";var a=r("4ea4");r("c975"),r("26e9"),r("ac1f"),r("1276"),r("498a"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("f6fd")),n=a(r("0de0")),s={components:{pickRegions:i.default},computed:{themeStyle:function(){return"theme-"+this.$store.state.themeStyle}},data:function(){return{formData:{id:0,name:"",mobile:"",telephone:"",province_id:"",city_id:"",district_id:"",community_id:"",address:"",full_address:"",latitude:0,longitude:0,is_default:1},address:"",addressValue:"",back:"",redirect:"redirectTo",flag:!1,defaultRegions:[]}},onLoad:function(e){e.id&&(this.formData.id=e.id,this.getAddressDetail()),e.back&&(this.back=e.back),e.redirect&&(this.redirect=e.redirect)},onShow:function(){this.$langConfig.refresh()},onReady:function(){this.$refs.loadingCover.hide()},onHide:function(){this.flag=!1},methods:{getAddressDetail:function(){var e=this;this.$api.sendRequest({url:"/api/memberaddress/info",data:{id:this.formData.id},success:function(t){var r=t.data;null!=r&&(e.formData.name=r.name,e.formData.mobile=r.mobile,e.formData.telephone=r.telephone,e.formData.address=r.address,e.formData.full_address=r.full_address,e.formData.latitude=r.latitude,e.formData.longitude=r.longitude,e.formData.is_default=r.is_default,e.defaultRegions=[r.province_id,r.city_id,r.district_id]),e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(t){e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},handleGetRegions:function(e){this.formData.full_address="",this.formData.full_address+=void 0!=e[0]?e[0].label:"",this.formData.full_address+=void 0!=e[1]?"-"+e[1].label:"",this.formData.full_address+=void 0!=e[2]?"-"+e[2].label:"",this.addressValue="",this.addressValue+=void 0!=e[0]?e[0].value:"",this.addressValue+=void 0!=e[1]?"-"+e[1].value:"",this.addressValue+=void 0!=e[2]?"-"+e[2].value:""},selectAddress:function(){var e=this;uni.chooseLocation({success:function(t){e.formData.latitude=t.latitude,e.formData.longitude=t.longitude,e.formData.address=t.name}})},vertify:function(){this.formData.name=this.formData.name.trim(),this.formData.mobile=this.formData.mobile.trim(),this.formData.address=this.formData.address.trim();var e=[{name:"name",checkType:"required",errorMsg:"请输入姓名"},{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"},{name:"full_address",checkType:"required",errorMsg:"请选择省市区县"},{name:"address",checkType:"required",errorMsg:"详细地址不能为空"}],t=n.default.check(this.formData,e);return!!t||(this.$util.showToast({title:n.default.error}),this.flag=!1,!1)},saveAddress:function(){var e=this;if(!this.flag&&(this.flag=!0,this.vertify())){var t=this.addressValue.split("-"),r={},a="";r={name:this.formData.name,mobile:this.formData.mobile,telephone:this.formData.telephone,province_id:t[0],city_id:t[1],district_id:t[2],community_id:0,address:this.formData.address,full_address:this.formData.full_address,latitude:this.formData.latitude,longitude:this.formData.longitude,is_default:this.formData.is_default},a="add",this.formData.id&&(a="edit",r.id=this.formData.id),this.$api.sendRequest({url:"/api/memberaddress/"+a,data:r,success:function(t){if(e.flag=!1,0==t.code)if(""!=e.back&&"edit"!=a){for(var r=!0,i=getCurrentPages().reverse(),n=0;n<i.length;n++)if(-1!=e.back.indexOf(i[n].route)){r=!1,uni.navigateBack({delta:n});break}r&&e.$util.redirectTo(e.back,{},"redirectTo")}else e.$util.showToast({title:t.message}),uni.navigateBack({delta:1})},fail:function(t){e.flag=!1}})}}}};t.default=s},3835:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=u(r("0d21")),i=u(r("09f0")),n=u(r("06c5")),s=u(r("3d8c"));function u(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return(0,a.default)(e)||(0,i.default)(e,t)||(0,n.default)(e,t)||(0,s.default)()}},"3d8c":function(e,t,r){"use strict";function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"5dd6":function(e,t,r){"use strict";var a=r("4ea4");r("4160"),r("a15b"),r("d81d"),r("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("3835"));r("96cf");var n=a(r("1da1")),s={props:{defaultRegions:{type:Array}},data:function(){return{pickerValueArray:[],cityArr:[],districtArr:[],multiIndex:[0,0,0],isInitMultiArray:!1,isLoadDefaultAreas:!1}},watch:{defaultRegions:{handler:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];3===e.length&&e.join("")!==t.join("")&&this.handleDefaultRegions()},immediate:!0}},computed:{multiArray:function(){if(this.isLoadDefaultAreas){var e=this.pickedArr.map((function(e){return e.map((function(e){return e.label}))}));return e}},pickedArr:function(){return this.isInitMultiArray?[this.pickerValueArray[0],this.pickerValueArray[1],this.pickerValueArray[2]]:[this.pickerValueArray[0],this.cityArr,this.districtArr]}},created:function(){this.getDefaultAreas(0,{level:0})},methods:{handleColumnChange:function(e){var t=this;return(0,n.default)(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.isInitMultiArray=!1,a=e.detail.column,i=e.detail.value,t.multiIndex[a]=i,r.t0=a,r.next=0===r.t0?7:1===r.t0?14:2===r.t0?18:19;break;case 7:return r.next=9,t.getAreasAsync(t.pickerValueArray[0][t.multiIndex[a]].value);case 9:return t.cityArr=r.sent,r.next=12,t.getAreasAsync(t.cityArr[0].value);case 12:return t.districtArr=r.sent,r.abrupt("break",19);case 14:return r.next=16,t.getAreasAsync(t.cityArr[t.multiIndex[a]].value);case 16:return t.districtArr=r.sent,r.abrupt("break",19);case 18:return r.abrupt("break",19);case 19:case"end":return r.stop()}}),r)})))()},handleValueChange:function(e){var t=(0,i.default)(e.detail.value,3),r=t[0],a=t[1],n=t[2],s=(0,i.default)(this.pickedArr,3),u=s[0],o=s[1],l=s[2],d=[u[r],o[a],l[n]];this.$emit("getRegions",d)},handleDefaultRegions:function(){var e=this,t=setInterval((function(){if(e.isLoadDefaultAreas){e.isInitMultiArray=!1;for(var r=0;r<e.defaultRegions.length;r++)for(var a=function(t){e.defaultRegions[r]==e.pickerValueArray[r][t].value&&(e.$set(e.multiIndex,r,t),e.getAreas(e.pickerValueArray[r][t].value,(function(r){e.cityArr=r;for(var a=function(r){if(e.defaultRegions[1]==e.cityArr[r].value)return e.$set(e.multiIndex,1,r),e.getAreas(e.cityArr[r].value,(function(a){e.districtArr=a;for(var i=0;i<e.districtArr.length;i++)if(e.defaultRegions[2]==e.districtArr[i].value){e.$set(e.multiIndex,2,i),e.handleValueChange({detail:{value:[t,r,i]}});break}})),"break"},i=0;i<e.cityArr.length;i++){var n=a(i);if("break"===n)break}})))},i=0;i<e.pickerValueArray[r].length;i++)a(i);e.isLoadDefaultAreas&&clearInterval(t)}}),100)},getDefaultAreas:function(e,t){var r=this;this.$api.sendRequest({url:"/api/address/lists",data:{pid:e},success:function(e){if(0==e.code){var a=[],i=void 0;e.data.forEach((function(e,r){void 0!=t&&(0==t.level&&void 0!=t.province_id?i=t.province_id:1==t.level&&void 0!=t.city_id?i=t.city_id:2==t.level&&void 0!=t.district_id&&(i=t.district_id)),void 0==i&&0==r&&(i=e.id),a.push({value:e.id,label:e.name})})),r.pickerValueArray[t.level]=a,t.level+1<3?(t.level++,r.getDefaultAreas(i,t)):(r.cityArr=r.pickerValueArray[1],r.districtArr=r.pickerValueArray[2],r.isInitMultiArray=!0,r.isLoadDefaultAreas=!0)}}})},getAreasAsync:function(e){var t=this;return(0,n.default)(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$api.sendRequest({url:"/api/address/lists",data:{pid:e},async:!1});case 2:if(a=r.sent,0!=a.code){r.next=7;break}return i=[],a.data.forEach((function(e,t){i.push({value:e.id,label:e.name})})),r.abrupt("return",i);case 7:case"end":return r.stop()}}),r)})))()},getAreas:function(e,t){this.$api.sendRequest({url:"/api/address/lists",data:{pid:e},success:function(e){if(0==e.code){var r=[];e.data.forEach((function(e,t){r.push({value:e.id,label:e.name})})),t&&t(r)}}})}}};t.default=s},"5fd4":function(e,t,r){"use strict";r.r(t);var a=r("3099"),i=r.n(a);for(var n in a)"default"!==n&&function(e){r.d(t,e,(function(){return a[e]}))}(n);t["default"]=i.a},"623c":function(e,t,r){"use strict";r.r(t);var a=r("296f"),i=r("5fd4");for(var n in i)"default"!==n&&function(e){r.d(t,e,(function(){return i[e]}))}(n);r("1412");var s,u=r("f0c5"),o=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"2badfc0a",null,!1,a["a"],s);t["default"]=o.exports},"6b75":function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"9dbc":function(e,t,r){var a=r("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/**  -------------------------------------------------------------------默认主题颜色配置-------------------------------------------------- */\n/**  -------------------------------------------------------------------蓝色主题颜色配置-------------------------------------------------- */\n/**  -------------------------------------------------------------------绿色主题颜色配置-------------------------------------------------- */\n/* 文字基本颜色 */\n/* 文字尺寸 */.edit-wrap[data-v-2badfc0a]{margin:%?20?%;background:#fff;border-radius:4px;overflow:hidden}.edit-item[data-v-2badfc0a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin:0 %?30?%;height:%?100?%;background-color:#fff}.edit-item .tit[data-v-2badfc0a]{width:%?120?%;font-size:%?30?%}.edit-item .select-address[data-v-2badfc0a]{display:inline-block;font-size:%?28?%;margin-left:%?10?%}.edit-item .select-address.empty[data-v-2badfc0a]{color:grey}.edit-item uni-input[data-v-2badfc0a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?30?%;margin-left:%?20?%;padding:0;margin-right:%?20?%}.edit-wrap > .edit-item + .edit-item[data-v-2badfc0a]{border-top:%?2?% solid #ebedf0}.add[data-v-2badfc0a]{margin-top:%?60?%!important}',""]),e.exports=t},ce07:function(e,t,r){var a=r("9dbc");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=r("4f06").default;i("18791ed0",a,!0,{sourceMap:!1,shadowMode:!1})},e68a:function(e,t,r){"use strict";r.r(t);var a=r("5dd6"),i=r.n(a);for(var n in a)"default"!==n&&function(e){r.d(t,e,(function(){return a[e]}))}(n);t["default"]=i.a},e6b2:function(e,t,r){"use strict";var a;r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return a}));var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"pick-regions"},[r("v-uni-picker",{attrs:{mode:"multiSelector",value:e.multiIndex,range:e.multiArray},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.handleValueChange.apply(void 0,arguments)},columnchange:function(t){arguments[0]=t=e.$handleEvent(t),e.handleColumnChange.apply(void 0,arguments)}}},[e._t("default")],2)],1)},n=[]},f6fd:function(e,t,r){"use strict";r.r(t);var a=r("e6b2"),i=r("e68a");for(var n in i)"default"!==n&&function(e){r.d(t,e,(function(){return i[e]}))}(n);var s,u=r("f0c5"),o=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);t["default"]=o.exports}}]);