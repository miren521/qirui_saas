(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["promotionpages-combo-detail-detail"],{"15a7":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={loadingCover:n("1ba8").default,nsLogin:n("7769").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{class:t.themeStyle},[n("v-uni-view",[n("v-uni-view",{staticClass:"combo-package"},[n("v-uni-view",{staticClass:"combo-package-list"},[n("v-uni-view",{staticClass:"combo-package-content"},[n("v-uni-view",{staticClass:"combo-package-name ns-text-color-black ns-bg-color-gray-fadeout-60"},[n("v-uni-view",{staticClass:"iconfont iconyuan_checked ns-text-color"}),n("v-uni-text",{staticClass:"ns-margin-right"},[t._v(t._s(t.combo.bl_name))])],1),t._l(t.combo.bundling_goods,(function(e,i){return n("v-uni-navigator",{key:i,staticClass:"goods-info",attrs:{"hover-class":"none",url:"/pages/goods/detail/detail?sku_id="+e.sku_id}},[n("v-uni-view",{staticClass:"goods-img"},[n("v-uni-view",{staticClass:"img-wrap"},[n("v-uni-image",{attrs:{src:t.$util.img(e.sku_image,{size:"mid"}),mode:"aspectFit"},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.imageError(i)}}})],1)],1),n("v-uni-view",{staticClass:"data-info"},[n("v-uni-view",{staticClass:"goods-name"},[t._v(t._s(e.sku_name))]),n("v-uni-view",{staticClass:"price-wrap"},[n("v-uni-text",{staticClass:"uni-bold ns-text-color"},[t._v(t._s(t.$lang("common.currencySymbol"))+" "+t._s(e.price))]),n("v-uni-text",{staticClass:"num"},[t._v("x1")])],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.stock<t.num,expression:"item.stock < num"}],staticClass:"stock-tips ns-text-color"},[t._v(t._s(t.$lang("stock"))+"："+t._s(e.stock)),e.unit?[t._v(t._s(e.unit))]:[t._v(t._s(t.$lang("num")))]],2)],1)],1)}))],2)],1),n("v-uni-view",{staticClass:"footer padding-bottom"},[n("v-uni-view",{staticClass:"combo-package-info padding-bottom"},[n("v-uni-view",{staticClass:"num"},[n("v-uni-text",[t._v(t._s(t.$lang("shopNum"))+"：")]),n("v-uni-input",{staticClass:"uni-input",attrs:{type:"number"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.numberChange(!1)}},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1),n("v-uni-view",{staticClass:"ns-text-color uni-bold ns-font-size-lg"},[n("v-uni-text",{staticClass:"package-price ns-text-color-black"},[t._v(t._s(t.$lang("price"))+"：")]),n("v-uni-text",[t._v(t._s(t.$lang("common.currencySymbol"))+" "+t._s(t.packagePrice))])],1),n("v-uni-view",{staticClass:"ns-font-size-sm"},[n("v-uni-text",{staticClass:"save-the-price"},[t._v(t._s(t.$lang("saveThePrice"))+"："+t._s(t.$lang("common.currencySymbol"))+" "+t._s(t.saveThePrice))])],1)],1),n("v-uni-view",{staticClass:"button"},[n("v-uni-button",{class:t.isDisabled?"btn-disabled":"",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comboBuy()}}},[t._v(t._s(t.$lang("shopping")))])],1)],1)],1),n("loading-cover",{ref:"loadingCover"}),n("ns-login",{ref:"login"})],1)],1)},o=[]},3228:function(t,e,n){"use strict";n.r(e);var i=n("a71b"),a=n("51a0");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("c961");var s,c=n("f0c5"),l=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"6877c9e3",null,!1,i["a"],s);e["default"]=l.exports},"3cce":function(t,e,n){"use strict";var i=n("4ea4");n("b680"),n("acd8"),n("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=i(n("1da1")),o=i(n("3228")),s={components:{uniNumberBox:o.default},data:function(){return{num:1,blId:0,combo:[],packagePrice:0,saveThePrice:0,isDisabled:!1}},onLoad:function(t){this.blId=t.bl_id||0},onShow:function(){this.$langConfig.refresh(),this.getList()},onHide:function(){this.btnSwitch=!0},computed:{themeStyle:function(){return"theme-"+this.$store.state.themeStyle}},methods:{getList:function(){var t=this;this.$api.sendRequest({url:"/bundling/api/bundling/detail",data:{bl_id:this.blId},success:function(e){e.data?(t.combo=e.data,t.numberChange()):t.$util.showToast({title:e.message}),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(e){t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},numberChange:function(t,e){var n=this;setTimeout((function(){var i=0;t&&0==n.num.length&&(n.num=1,i++),t&&(n.num<=0||isNaN(n.num))&&(n.number=1,i++),t&&(n.num=parseInt(n.num));for(var a=0,o=0;o<n.combo.bundling_goods.length;o++)a+=parseFloat(n.combo.bundling_goods[o].price),n.combo.bundling_goods[o].stock<n.num&&i++;n.isDisabled=i>0,n.saveThePrice=((a-n.combo.bl_price)*n.num).toFixed(2),n.packagePrice=(n.combo.bl_price*n.num).toFixed(2),e&&e()}),0)},comboBuy:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isDisabled){e.next=2;break}return e.abrupt("return");case 2:t.numberChange(!0,(function(){if(uni.getStorageSync("token")){if(0!=t.btnSwitch){t.btnSwitch=!1;var e={bl_id:t.blId,num:t.num};uni.setStorage({key:"comboOrderCreateData",data:e,success:function(){t.$util.redirectTo("/promotionpages/combo/payment/payment"),t.btnSwitch=!1}})}}else t.$refs.login.open("/promotionpages/combo/detail/detail?bl_id="+t.blId)}));case 3:case"end":return e.stop()}}),e)})))()},imageError:function(t){this.combo.bundling_goods[t].sku_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()}},onShareAppMessage:function(t){var e="购买套餐，优惠多多哦",n="/promotionpages/combo/detail/detail?bl_id="+this.blId;return{title:e,path:n,success:function(t){},fail:function(t){}}}};e.default=s},"51a0":function(t,e,n){"use strict";n.r(e);var i=n("96bd"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"5ec8":function(t,e,n){"use strict";n.r(e);var i=n("15a7"),a=n("8374");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("b3df");var s,c=n("f0c5"),l=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"53652161",null,!1,i["a"],s);e["default"]=l.exports},8374:function(t,e,n){"use strict";n.r(e);var i=n("3cce"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"8bc5":function(t,e,n){var i=n("eed4");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("5b9b5307",i,!0,{sourceMap:!1,shadowMode:!1})},"96bd":function(t,e,n){"use strict";n("a9e3"),n("ac1f"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniNumberBox",props:{value:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},modifyFlag:{type:Boolean,default:!1},size:{type:String,default:"default"},index:{type:Number,default:-1}},data:function(){return{inputValue:0}},watch:{value:function(t){this.inputValue=+t},inputValue:function(t,e,n){+t===+e||this.modifyFlag||this.$emit("change",t,n)}},created:function(){this.inputValue=+this.value},methods:{_calcValue:function(t){if(!this.disabled&&!this.modifyFlag){var e=this._getDecimalScale(),n=this.inputValue*e,i=this.step*e;"minus"===t?n-=i:"plus"===t&&(n+=i),n<this.min||n>this.max||(this.inputValue=n/e)}},_getDecimalScale:function(){var t=1;return~~this.step!==this.step&&(t=Math.pow(10,(this.step+"").split(".")[1].length)),t},_onInput:function(t){var e=this;setTimeout((function(){var n=t.detail.value;/(^[1-9]\d*$)/.test(n)||(n=e.min),n?(n=+n,n>e.max?n=e.max:n<e.min&&(n=e.min),e.inputValue=n):e.inputValue=0}),0)}}};e.default=i},a71b:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-numbox",class:{small:"small"==t.size}},[n("v-uni-view",{staticClass:"uni-numbox__minus",class:{"uni-numbox--disabled":t.inputValue<=t.min||t.disabled,small:"small"==t.size},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._calcValue("minus")}}},[t._v("-")]),n("v-uni-input",{staticClass:"uni-numbox__value",class:{small:"small"==t.size},attrs:{disabled:t.disabled,type:"number"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t._onInput.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t._onInput.apply(void 0,arguments)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),n("v-uni-view",{staticClass:"uni-numbox__plus",class:{"uni-numbox--disabled":t.inputValue>=t.max||t.disabled,small:"small"==t.size},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._calcValue("plus")}}},[t._v("+")])],1)},o=[]},b3df:function(t,e,n){"use strict";var i=n("8bc5"),a=n.n(i);a.a},bd13:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'.uni-numbox[data-v-6877c9e3]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;height:%?70?%;position:relative}.uni-numbox.small[data-v-6877c9e3]{height:%?52?%}.uni-numbox[data-v-6877c9e3]:after{content:"";position:absolute;-webkit-transform-origin:center;transform-origin:center;box-sizing:border-box;pointer-events:none;top:-50%;left:-50%;right:-50%;bottom:-50%;border:1px solid #e5e5e5;border-radius:%?12?%;-webkit-transform:scale(.5);transform:scale(.5)}.uni-numbox__minus[data-v-6877c9e3],\r\n.uni-numbox__plus[data-v-6877c9e3]{margin:0;background-color:#f8f8f8;width:%?70?%;font-size:%?40?%;height:100%;line-height:%?70?%;text-align:center;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#333;position:relative}.uni-numbox__value[data-v-6877c9e3]{position:relative;background-color:#fff;width:%?80?%;height:100%;text-align:center;padding:0}.uni-numbox__minus.small[data-v-6877c9e3],\r\n.uni-numbox__plus.small[data-v-6877c9e3]{width:%?50?%;line-height:%?50?%}.uni-numbox__value.small[data-v-6877c9e3]{width:%?60?%;font-size:%?28?%}.uni-numbox__value[data-v-6877c9e3]:after{content:"";position:absolute;-webkit-transform-origin:center;transform-origin:center;box-sizing:border-box;pointer-events:none;top:-50%;left:-50%;right:-50%;bottom:-50%;border-style:solid;border-color:#e5e5e5;border-left-width:1px;border-right-width:1px;border-top-width:0;border-bottom-width:0;-webkit-transform:scale(.5);transform:scale(.5)}.uni-numbox--disabled[data-v-6877c9e3]{color:silver}',""]),t.exports=e},c5e0:function(t,e,n){var i=n("bd13");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("db311e04",i,!0,{sourceMap:!1,shadowMode:!1})},c961:function(t,e,n){"use strict";var i=n("c5e0"),a=n.n(i);a.a},eed4:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/**  -------------------------------------------------------------------默认主题颜色配置-------------------------------------------------- */\n/**  -------------------------------------------------------------------蓝色主题颜色配置-------------------------------------------------- */\n/**  -------------------------------------------------------------------绿色主题颜色配置-------------------------------------------------- */\n/* 文字基本颜色 */\n/* 文字尺寸 */.uni-bold[data-v-53652161]{font-weight:700}.placeholder[data-v-53652161]{height:55px}.combo-package[data-v-53652161]{padding-bottom:%?160?%;padding-bottom:calc(%?160?% + constant(safe-area-inset-bottom));padding-bottom:calc(%?160?% + env(safe-area-inset-bottom))}.combo-package .footer[data-v-53652161]{width:100%;height:%?180?%;background:#fff;position:fixed;bottom:0}.combo-package .footer .combo-package-info[data-v-53652161]{width:68%;position:absolute;bottom:0}.combo-package .footer .combo-package-info .uni-numbox[data-v-53652161]{height:%?50?%;padding:0}.combo-package .footer .combo-package-info .num uni-text[data-v-53652161]{vertical-align:middle}.combo-package .footer .combo-package-info .num uni-input[data-v-53652161]{display:inline-block;width:%?100?%;vertical-align:middle;text-align:left;width:%?300?%}.combo-package .footer .combo-package-info uni-view[data-v-53652161]{padding-right:%?20?%;padding-left:%?20?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.combo-package .footer .combo-package-info uni-view .package-price[data-v-53652161]{margin-top:%?10?%;display:inline-block}.combo-package .footer .combo-package-info uni-view .save-the-price[data-v-53652161]{display:inline-block;color:#898989}.combo-package .footer .button[data-v-53652161]{width:30%;line-height:%?120?%;height:%?120?%;margin:0;border-radius:0;position:absolute;right:0;bottom:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.combo-package-content[data-v-53652161]{padding-bottom:%?40?%}.combo-package-content .combo-package-name[data-v-53652161]{padding:%?16?% %?20?%;background:#fff}.combo-package-content .combo-package-name .iconfont[data-v-53652161]{display:inline-block;font-size:%?50?%;vertical-align:middle;margin-right:%?20?%}.combo-package-content .goods-info[data-v-53652161]{overflow:hidden;margin:%?20?%;padding:%?20?%;background:#fff;border-radius:4px;border-bottom:1px solid hsla(0,0%,89.8%,.5)}.combo-package-content .goods-info[data-v-53652161]:last-child{margin-bottom:0}.combo-package-content .goods-info .data-info[data-v-53652161]{display:inline-block;width:66%;float:left;position:relative;margin-left:%?20?%}.combo-package-content .goods-info .data-info .goods-name[data-v-53652161]{overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;line-height:150%;margin-bottom:%?20?%}.combo-package-content .goods-info .data-info .price-wrap[data-v-53652161]{height:%?50?%;line-height:%?50?%}.combo-package-content .goods-info .data-info .price-wrap .num[data-v-53652161]{float:right}.combo-package-content .goods-info .goods-img[data-v-53652161]{display:inline-block;width:30%;text-align:center;line-height:100%;float:left}.combo-package-content .goods-info .goods-img .img-wrap[data-v-53652161]{display:inline-block;width:100%;height:%?140?%;text-align:center}.combo-package-content .goods-info .goods-img .img-wrap uni-image[data-v-53652161]{height:%?140?%;width:100%;vertical-align:middle}.padding-bottom[data-v-53652161]{padding-bottom:0!important;padding-bottom:constant(safe-area-inset-bottom)!important;padding-bottom:env(safe-area-inset-bottom)!important}.margin-bottom[data-v-53652161]{margin-bottom:0!important;margin-bottom:constant(safe-area-inset-bottom)!important;margin-bottom:env(safe-area-inset-bottom)!important}',""]),t.exports=e}}]);