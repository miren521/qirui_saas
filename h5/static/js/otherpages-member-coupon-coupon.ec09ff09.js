(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["otherpages-member-coupon-coupon"],{"021a":function(t,e,i){var o=i("2c39");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("1276690b",o,!0,{sourceMap:!1,shadowMode:!1})},"2c39":function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/**  -------------------------------------------------------------------默认主题颜色配置-------------------------------------------------- */\n/**  -------------------------------------------------------------------蓝色主题颜色配置-------------------------------------------------- */\n/**  -------------------------------------------------------------------绿色主题颜色配置-------------------------------------------------- */\n/* 文字基本颜色 */\n/* 文字尺寸 */.cf-container[data-v-25eda39d]{background:#fff;overflow:hidden;border-bottom:%?2?% solid}.tab[data-v-25eda39d]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.tab > uni-view[data-v-25eda39d]{text-align:center;width:40%}.tab > uni-view uni-text[data-v-25eda39d]{display:inline-block;line-height:%?88?%}.tab .active[data-v-25eda39d]{border-bottom:%?4?% solid #ff335c}.tabs-box[data-v-25eda39d]{overflow:hidden}.status-tab[data-v-25eda39d]{border:%?2?% solid silver;margin:%?20?% auto 0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?600?%;border-radius:%?100?%;overflow:hidden}.status-tab uni-view[data-v-25eda39d]{width:%?200?%;text-align:center;color:#838383}.status-tab uni-view.active[data-v-25eda39d]{color:#fff;border:%?2?% solid}.status-tab uni-view[data-v-25eda39d]:not(:last-of-type){border-right:%?2?% solid}.coupon-list[data-v-25eda39d]{width:100%;height:100%;padding:%?20?%;box-sizing:border-box}.coupon-list .coupon-li[data-v-25eda39d]{width:%?702?%;height:%?206?%;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:%?20?%;position:relative}.coupon-list .coupon-li uni-image[data-v-25eda39d]{width:100%;height:100%;position:absolute;left:0;top:0}.coupon-list .coupon-li .li-top[data-v-25eda39d]{width:%?652?%;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;border-bottom:1px dashed #e1e1e1;position:relative;margin-top:%?39?%;line-height:1;padding:0 %?10?%;box-sizing:border-box;padding-bottom:%?26?%}.coupon-list .coupon-li .li-top .top-content-left[data-v-25eda39d]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;line-height:1;-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden}.coupon-list .coupon-li .li-top .top-content-left .coupon-name[data-v-25eda39d]{width:100%;line-height:1;color:#000;font-size:%?28?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.coupon-list .coupon-li .li-top .top-content-left .coupon-desc[data-v-25eda39d]{line-height:1;color:#ababab;font-size:%?20?%;margin-top:%?23?%}.coupon-list .coupon-li .li-top .top-content-right[data-v-25eda39d]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:1}.coupon-list .coupon-li .li-top .top-content-right .font-sm[data-v-25eda39d]{line-height:1;margin-top:%?20?%;font-size:%?32?%;margin-right:%?6?%}.coupon-list .coupon-li .li-top .top-content-right .font-big[data-v-25eda39d]{line-height:1;font-size:%?70?%}.coupon-list .coupon-li .li-bottom[data-v-25eda39d]{-webkit-box-flex:1;-webkit-flex:1;flex:1;width:%?652?%;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;z-index:5;padding:0 %?10?%;box-sizing:border-box}.coupon-list .coupon-li .li-bottom .fonts-sm[data-v-25eda39d]{color:#ababab;font-size:%?24?%}.coupon-list .coupon-li .li-bottom .li-bottom-right[data-v-25eda39d]{display:-webkit-box;display:-webkit-flex;display:flex}.coupon-list .coupon-li .li-bottom .li-bottom-right .getCoupon[data-v-25eda39d]{font-size:%?24?%}.coupon-list .coupon-li .li-bottom .li-bottom-right .iconright[data-v-25eda39d]{margin-left:%?10?%;font-size:%?24?%}.active[data-v-25eda39d]{border-bottom:%?4?% solid}.cf-container[data-v-25eda39d]{background:#fff;overflow:hidden;border-bottom:%?2?% solid}.empty[data-v-25eda39d]{margin-top:%?100?%}',""]),t.exports=e},"46bc":function(t,e,i){"use strict";i.r(e);var o=i("d438"),n=i("d283");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("a2b2");var a,l=i("f0c5"),c=Object(l["a"])(n["default"],o["b"],o["c"],!1,null,"25eda39d",null,!1,o["a"],a);e["default"]=c.exports},a2b2:function(t,e,i){"use strict";var o=i("021a"),n=i.n(o);n.a},cd90:function(t,e,i){"use strict";i("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{couponType:1,type:"",state:1,list:[],isIphoneX:!1,showEmpty:!1,emptyBtn:{text:"去领取",url:"/otherpages/goods/coupon/coupon"},text:"您还没有优惠券哦"}},onLoad:function(t){this.isIphoneX=this.$util.uniappIsIPhoneX()},onShow:function(){var t=this;if(this.$langConfig.refresh(),!this.addonIsExit.coupon)return this.$util.showToast({title:"优惠券插件未安装",mask:!0,duration:2e3}),void setTimeout((function(){t.$util.redirectTo("/pages/member/index/index",{},"redirectTo")}),2e3);if(!uni.getStorageSync("token")){var e=getCurrentPages(),i=e[e.length-1].options,o=e[e.length-1].route;return i.back=o,void this.$util.redirectTo("/pages/login/login/login",i)}this.$refs.mescroll&&this.$refs.mescroll.refresh(!1)},computed:{themeStyle:function(){return"theme-"+this.$store.state.themeStyle},addonIsExit:function(){return this.$store.state.addonIsExit}},methods:{changeType:function(t){this.list=[],this.couponType=t,this.$refs.mescroll.refresh(!1)},changeState:function(t){this.list=[],this.state=t,this.$refs.mescroll.refresh(!1),1==this.state?this.text="您还没有优惠券哦":2==this.state?this.text="您还没有使用过优惠券哦":this.text="您还没有过期优惠券哦"},getMemberCounponList:function(t){var e=this,i=1==this.couponType?"/coupon/api/coupon/memberpage":"/platformcoupon/api/platformcoupon/memberpage";this.$api.sendRequest({url:i,data:{page:t.num,page_size:t.size,state:this.state,is_own:this.type},success:function(i){if(-1==i.code&&"TOKEN_ERROR"==i.error_code){e.$util.showToast({title:"登录失败"});var o=getCurrentPages(),n=o[o.length-1].options,s=o[o.length-1].route;return n.back=s,void setTimeout((function(){e.$util.redirectTo("/pages/login/login/login",n)}),1500)}e.showEmpty=!0;var a=[],l=i.message;0==i.code&&i.data?a=i.data.list:e.$util.showToast({title:l}),t.endSuccess(a.length),1==t.num&&(e.list=[]),e.list=e.list.concat(a),e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(i){t.endErr(),e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},toGoodList:function(t){1==this.state&&(1==this.couponType?1!=t.goods_type?this.$util.redirectTo("/otherpages/shop/list/list",{couponId:t.coupon_type_id,site_id:t.site_id}):this.$util.redirectTo("/otherpages/shop/list/list",{site_id:t.site_id}):1!=t.use_scenario?this.$util.redirectTo("/pages/goods/list/list",{platformcouponTypeId:t.platformcoupon_type_id}):this.$util.redirectTo("/pages/goods/list/list",{}))},imageError:function(t){this.list[t].logo=this.$util.getDefaultImage().default_shop_img,this.$forceUpdate()}}};e.default=o},d283:function(t,e,i){"use strict";i.r(e);var o=i("cd90"),n=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=n.a},d438:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var o={nsEmpty:i("916e").default,loadingCover:i("1ba8").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{class:t.themeStyle},[t.addonIsExit.coupon?i("v-uni-view",{class:t.isIphoneX?"iphone-x":""},[i("v-uni-view",{staticClass:"cf-container ns-border-color-gray"},[i("v-uni-view",{staticClass:"tab"},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeType(1)}}},[i("v-uni-text",{class:1==t.couponType?"ns-text-color active ns-border-color-bottom":""},[t._v("店铺优惠劵")])],1),i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeType(2)}}},[i("v-uni-text",{class:2==t.couponType?"ns-text-color active ns-border-color-bottom":""},[t._v("平台优惠劵")])],1)],1)],1),i("v-uni-view",{staticClass:"tabs-box"},[i("v-uni-view",{staticClass:"status-tab"},[i("v-uni-view",{staticClass:"ns-border-color",class:1==t.state?"active ns-bg-color ":"ns-text-color",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeState(1)}}},[t._v("未使用")]),i("v-uni-view",{staticClass:"ns-border-color",class:2==t.state?"active ns-bg-color ns-border-color":"ns-text-color",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeState(2)}}},[t._v("已使用")]),i("v-uni-view",{staticClass:"ns-border-color",class:3==t.state?"active ns-bg-color":"ns-text-color",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeState(3)}}},[t._v("已过期")])],1)],1),i("mescroll-uni",{ref:"mescroll",attrs:{top:"170"},on:{getData:function(e){arguments[0]=e=t.$handleEvent(e),t.getMemberCounponList.apply(void 0,arguments)}}},[i("template",{attrs:{slot:"list"},slot:"list"},[i("v-uni-view",{staticClass:"coupon-list"},[t._l(t.list,(function(e,o){return i("v-uni-view",{key:o,staticClass:"coupon-li",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toGoodList(e)}}},[i("v-uni-image",{attrs:{src:t.$util.img("upload/uniapp/coupon/coupon_ysy.png"),mode:"widthFix"}}),i("v-uni-view",{staticClass:"li-top"},[i("v-uni-view",{staticClass:"top-content-left"},[i("v-uni-view",{staticClass:"coupon-name"},[t._v(t._s(1==t.couponType?e.coupon_name:e.platformcoupon_name)),1==t.couponType&&e.site_name?i("v-uni-text",{staticClass:"ns-text-color-gray"},[t._v("("+t._s(e.site_name)+")")]):t._e()],1),i("v-uni-view",{staticClass:"coupon-desc"},[e.validity_type?i("v-uni-text",[t._v("领取之日起"+t._s(e.fixed_term)+"日内有效")]):i("v-uni-text",[t._v("有效日期至"+t._s(t.$util.timeStampTurnTime(e.end_time)))])],1)],1),i("v-uni-view",{staticClass:"top-content-right"},[e.discount&&"0.00"!=e.discount?[i("v-uni-text",{staticClass:"font-big ns-text-color"},[t._v(t._s(parseInt(e.discount)))]),i("v-uni-text",{staticClass:"font-big ns-text-color"},[t._v("折")])]:[i("v-uni-text",{staticClass:"font-big ns-text-color"},[t._v("￥")]),i("v-uni-text",{staticClass:"font-big ns-text-color"},[t._v(t._s(parseInt(e.money)))])]],2)],1),i("v-uni-view",{staticClass:"li-bottom"},[i("v-uni-view",{staticClass:"fonts-sm"},[1==t.couponType?[1==e.goods_type?i("v-uni-text",[t._v("全场商品")]):i("v-uni-text",[t._v("指定商品")])]:t._e(),2==t.couponType?[1==e.use_scenario?i("v-uni-text",[t._v("全场店铺")]):i("v-uni-text",[t._v("指定店铺")])]:t._e(),e.at_least>0?i("v-uni-text",[t._v("满"+t._s(e.at_least)+"元可用")]):i("v-uni-text",[t._v("无门槛优惠券")]),e.discount_limit&&"0.00"!=e.discount_limit?i("v-uni-text",{staticClass:"ns-text-color"},[t._v("(最大优惠"+t._s(e.discount_limit)+"元)")]):t._e()],2),i("v-uni-view",{staticClass:"li-bottom-right"},["1"==t.state?i("v-uni-view",{staticClass:"getCoupon ns-text-color"},[t._v("去使用")]):t._e(),i("v-uni-view",{staticClass:"iconfont iconright ns-text-color"})],1)],1)],1)})),!t.list.length&&t.showEmpty?i("v-uni-view",{staticClass:"ns-margin-top"},[i("ns-empty",{attrs:{emptyBtn:t.emptyBtn,text:t.text}})],1):t._e()],2)],1)],2),i("loading-cover",{ref:"loadingCover"})],1):t._e()],1)},s=[]}}]);