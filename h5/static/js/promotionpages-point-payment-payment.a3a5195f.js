(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["promotionpages-point-payment-payment"],{"2c8f":function(e,t,i){"use strict";i.r(t);var a=i("583e"),o=i("4a24");for(var n in o)"default"!==n&&function(e){i.d(t,e,(function(){return o[e]}))}(n);i("d10d"),i("6d4a");var r,s=i("f0c5"),d=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"0e7e9cb4",null,!1,a["a"],r);t["default"]=d.exports},"4a24":function(e,t,i){"use strict";i.r(t);var a=i("968a"),o=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=o.a},"583e":function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a}));var a={loadingCover:i("1ba8").default},o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"order-container",class:e.themeStyle},[1==e.orderPaymentData.exchange_info.type?i("v-uni-view",{staticClass:"address-wrap"},[i("v-uni-view",{staticClass:"icon"},[i("v-uni-view",{staticClass:"iconfont icondizhi ns-text-color"})],1),i("v-uni-view",{staticClass:"address-info",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectAddress.apply(void 0,arguments)}}},[e.orderPaymentData.member_address?[i("v-uni-view",{staticClass:"info"},[i("v-uni-text",[e._v("收货人："+e._s(e.orderPaymentData.member_address.name))]),i("v-uni-text",[e._v(e._s(e.orderPaymentData.member_address.mobile))])],1),i("v-uni-view",{staticClass:"detail"},[i("v-uni-text",[e._v("收货地址："+e._s(e.orderPaymentData.member_address.full_address)+" "+e._s(e.orderPaymentData.member_address.address))])],1)]:[i("v-uni-view",{staticClass:"address-empty ns-text-color"},[i("v-uni-text",[e._v("您还没有设置收货地址，前去设置")])],1)]],2),i("v-uni-view",{staticClass:"cell-more"},[i("v-uni-view",{staticClass:"iconfont iconright"})],1)],1):e._e(),i("v-uni-view",{staticClass:"site-wrap"},[i("v-uni-view",{staticClass:"site-body"},[i("v-uni-view",{staticClass:"goods-wrap"},[i("v-uni-view",{staticClass:"goods-img"},[1==e.type?[e.orderPaymentData.exchange_info.image?i("v-uni-image",{attrs:{src:e.$util.img(e.orderPaymentData.exchange_info.image),mode:"aspectFill"},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.imageError()}}}):i("v-uni-image",{attrs:{src:e.$util.img("upload/uniapp/point/gift.png"),mode:"aspectFill"}})]:e._e(),2==e.type?[e.orderPaymentData.exchange_info.image?i("v-uni-image",{attrs:{src:e.$util.img(e.orderPaymentData.exchange_info.image),mode:"aspectFill"},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.imageError()}}}):i("v-uni-image",{attrs:{src:e.$util.img("upload/uniapp/point/coupon.png"),mode:"aspectFill"}})]:e._e(),3==e.type?[e.orderPaymentData.exchange_info.image?i("v-uni-image",{attrs:{src:e.$util.img(e.orderPaymentData.exchange_info.image),mode:"aspectFill"},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.imageError()}}}):i("v-uni-image",{attrs:{src:e.$util.img("upload/uniapp/point/hongbao.png"),mode:"aspectFill"}})]:e._e()],2),i("v-uni-view",{staticClass:"goods-info"},[i("v-uni-view",{staticClass:"goods-name"},[e._v(e._s(e.orderPaymentData.exchange_info.name))]),i("v-uni-view",{staticClass:"goods-sub-section"},[i("v-uni-view",[i("v-uni-text",{staticClass:"goods-price ns-text-color"},[e._v(e._s(e.orderPaymentData.exchange_info.point)+"积分")])],1),i("v-uni-view",[i("v-uni-text",[i("v-uni-text",{staticClass:"iconfont iconclose"}),e._v(e._s(e.orderPaymentData.num))],1)],1)],1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"order-buyer-message"},[i("v-uni-view",{staticClass:"order-cell"},[i("v-uni-text",{staticClass:"tit"},[e._v("买家留言")]),i("v-uni-view",{staticClass:"box"},[i("v-uni-textarea",{staticClass:"ns-text-color-gray ns-font-size-base textarea",attrs:{value:"",placeholder:"留言前建议先与商家协调一致","placeholder-class":"ns-text-color-gray ns-font-size-base","auto-height":!0},model:{value:e.orderCreateData.buyer_message,callback:function(t){e.$set(e.orderCreateData,"buyer_message",t)},expression:"orderCreateData.buyer_message"}})],1)],1)],1),i("v-uni-view",{staticClass:"order-money"},[i("v-uni-view",{staticClass:"order-cell"},[i("v-uni-text",{staticClass:"tit"},[e._v("商品金额")]),i("v-uni-view",{staticClass:"box align-right"},[i("v-uni-text",{staticClass:"ns-text-color-black"},[e._v(e._s(e.orderPaymentData.point)+"积分")])],1)],1)],1),i("v-uni-view",{staticClass:"order-submit"},[i("v-uni-view",{staticClass:"order-settlement-info"},[i("v-uni-text",{staticClass:"ns-text-color-gray"},[e._v("共"+e._s(e.orderPaymentData.num)+"件，")]),i("v-uni-text",[e._v("合计：")]),i("v-uni-text",{staticClass:"ns-text-color"},[i("v-uni-text",{staticClass:"money"},[e._v(e._s(e.orderPaymentData.point)+"积分")])],1)],1),i("v-uni-view",{staticClass:"submit-btn"},[i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.orderCreate.apply(void 0,arguments)}}},[e._v("提交订单")])],1)],1),i("loading-cover",{ref:"loadingCover"})],1)},n=[]},"6d4a":function(e,t,i){"use strict";var a=i("b135"),o=i.n(a);o.a},"7d01":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/**  -------------------------------------------------------------------默认主题颜色配置-------------------------------------------------- */\n/**  -------------------------------------------------------------------蓝色主题颜色配置-------------------------------------------------- */\n/**  -------------------------------------------------------------------绿色主题颜色配置-------------------------------------------------- */\n/* 文字基本颜色 */\n/* 文字尺寸 */.align-right[data-v-0e7e9cb4]{text-align:right}.inline[data-v-0e7e9cb4]{display:inline!important}.order-container[data-v-0e7e9cb4]{height:100%;padding-bottom:%?130?%;padding-bottom:calc(%?130?% + constant(safe-area-inset-bottom));padding-bottom:calc(%?130?% + env(safe-area-inset-bottom))}.address-wrap[data-v-0e7e9cb4]{margin:%?20?%;padding:%?20?%;border-radius:4px;background:#fff;position:relative;min-height:%?100?%}.address-wrap .icon[data-v-0e7e9cb4]{width:%?80?%;height:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-radius:50%;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);margin-right:%?20?%}.address-wrap .icon .iconfont[data-v-0e7e9cb4]{line-height:1;color:#fff;font-size:%?36?%}.address-wrap .address-info[data-v-0e7e9cb4]{padding-left:%?100?%;padding-right:%?40?%}.address-wrap .address-info .info[data-v-0e7e9cb4]{display:-webkit-box;display:-webkit-flex;display:flex}.address-wrap .address-info .info uni-text[data-v-0e7e9cb4]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.address-wrap .address-info .info uni-text[data-v-0e7e9cb4]:last-of-type{text-align:right;color:#999}.address-wrap .address-info .detail[data-v-0e7e9cb4]{line-height:1.3}.address-wrap .address-empty[data-v-0e7e9cb4]{line-height:%?100?%}.address-wrap .cell-more[data-v-0e7e9cb4]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);right:%?10?%}.address-wrap .cell-more .iconfont[data-v-0e7e9cb4]{color:#999}.mobile-wrap[data-v-0e7e9cb4]{margin:%?20?%;padding:%?20?%;border-radius:4px;background:#fff;position:relative}.mobile-wrap .form-group .form-item[data-v-0e7e9cb4]{display:-webkit-box;display:-webkit-flex;display:flex;line-height:%?50?%}.mobile-wrap .form-group .form-item .text[data-v-0e7e9cb4]{display:inline-block;line-height:%?50?%;padding-right:%?10?%}.mobile-wrap .form-group .form-item .placeholder[data-v-0e7e9cb4]{line-height:%?50?%}.mobile-wrap .form-group .form-item .input[data-v-0e7e9cb4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:%?50?%;line-height:%?50?%}.order-cell[data-v-0e7e9cb4]{display:-webkit-box;display:-webkit-flex;display:flex;margin:%?20?% 0;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#fff;line-height:%?40?%}.order-cell .tit[data-v-0e7e9cb4]{text-align:left}.order-cell .box[data-v-0e7e9cb4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:0 %?20?%;line-height:inherit;min-height:%?40?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.order-cell .box .textarea[data-v-0e7e9cb4]{min-height:%?40?%;line-height:1.5;padding:%?1?% 0;box-sizing:border-box}.order-cell .iconfont[data-v-0e7e9cb4]{color:#bbb;font-size:%?28?%}.order-cell .order-pay[data-v-0e7e9cb4]{padding:0}.order-cell .order-pay uni-text[data-v-0e7e9cb4]{display:inline-block;margin-left:%?6?%}.site-wrap[data-v-0e7e9cb4]{margin:%?20?%;padding:%?20?%;border-radius:4px;background:#fff;position:relative}.site-wrap .site-header[data-v-0e7e9cb4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.site-wrap .site-header .icondianpu[data-v-0e7e9cb4]{display:inline-block;line-height:1;margin-right:%?12?%;font-size:%?30?%}.site-wrap .site-body .goods-wrap[data-v-0e7e9cb4]{margin-bottom:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;position:relative}.site-wrap .site-body .goods-wrap[data-v-0e7e9cb4]:last-of-type{margin-bottom:0}.site-wrap .site-body .goods-wrap .goods-img[data-v-0e7e9cb4]{width:%?180?%;height:%?180?%;padding:%?20?% 0 0 0;margin-right:%?20?%}.site-wrap .site-body .goods-wrap .goods-img uni-image[data-v-0e7e9cb4]{width:100%;height:100%;border-radius:4px}.site-wrap .site-body .goods-wrap .goods-info[data-v-0e7e9cb4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;position:relative;padding:%?20?% 0 0 0;max-width:calc(100% - %?200?%)}.site-wrap .site-body .goods-wrap .goods-info .goods-name[data-v-0e7e9cb4]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;line-height:1.5;font-size:%?28?%}.site-wrap .site-body .goods-wrap .goods-info .goods-sub-section[data-v-0e7e9cb4]{width:100%;line-height:1.3;display:-webkit-box;display:-webkit-flex;display:flex}.site-wrap .site-body .goods-wrap .goods-info .goods-sub-section .goods-price[data-v-0e7e9cb4]{font-weight:700;font-size:15px}.site-wrap .site-body .goods-wrap .goods-info .goods-sub-section .unit[data-v-0e7e9cb4]{font-weight:400;font-size:%?24?%;margin-right:%?2?%}.site-wrap .site-body .goods-wrap .goods-info .goods-sub-section uni-view[data-v-0e7e9cb4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;line-height:1.3}.site-wrap .site-body .goods-wrap .goods-info .goods-sub-section uni-view[data-v-0e7e9cb4]:last-of-type{text-align:right}.site-wrap .site-body .goods-wrap .goods-info .goods-sub-section uni-view:last-of-type .iconfont[data-v-0e7e9cb4]{line-height:1;font-size:%?26?%}.order-checkout[data-v-0e7e9cb4]{margin:%?20?%;padding:%?20?%;border-radius:4px;background:#fff;position:relative}.order-money[data-v-0e7e9cb4]{margin:%?20?%;padding:%?20?%;border-radius:4px;background:#fff;position:relative}.order-money .order-cell .box[data-v-0e7e9cb4]{padding:0}.order-money .order-cell .box .operator[data-v-0e7e9cb4]{font-size:%?24?%;margin-right:%?6?%}.order-buyer-message[data-v-0e7e9cb4]{margin:%?20?%;padding:%?20?%;border-radius:4px;background:#fff;position:relative}.order-buyer-message .textarea[data-v-0e7e9cb4]{width:100%}.order-submit[data-v-0e7e9cb4]{position:fixed;z-index:5;left:0;bottom:0;width:100vw;height:%?120?%;background:#fff;box-shadow:0 0 10px rgba(0,0,0,.1);text-align:right;display:-webkit-box;display:-webkit-flex;display:flex;padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.order-submit .order-settlement-info[data-v-0e7e9cb4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:%?120?%;line-height:%?120?%}.order-submit .order-settlement-info .money[data-v-0e7e9cb4]{font-size:%?36?%}.order-submit .submit-btn[data-v-0e7e9cb4]{height:%?80?%;margin:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.order-submit .submit-btn uni-button[data-v-0e7e9cb4]{line-height:2.6}.popup[data-v-0e7e9cb4]{width:100vw;background:#fff;border-top-left-radius:%?24?%;border-top-right-radius:%?24?%}.popup .popup-header[data-v-0e7e9cb4]{height:%?90?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?30?%}.popup .popup-header > uni-view[data-v-0e7e9cb4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;line-height:1}.popup .popup-header .tit[data-v-0e7e9cb4]{font-size:%?32?%;font-weight:600}.popup .popup-header .vice-tit[data-v-0e7e9cb4]{margin-right:%?20?%}.popup .popup-body[data-v-0e7e9cb4]{height:calc(100% - %?210?%)}.popup .popup-body.safe-area[data-v-0e7e9cb4]{height:calc(100% - %?278?%)}',""]),e.exports=t},"968a":function(e,t,i){"use strict";var a=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(i("e0b0")),n=a(i("4c55")),r={mixins:[o.default],components:{uniPopup:n.default},data:function(){return{}},onLoad:function(e){this.type=e.type?e.type:1},onShow:function(){this.$langConfig.refresh()},methods:{},computed:{themeStyle:function(){return"theme-"+this.$store.state.themeStyle}}};t.default=r},b135:function(e,t,i){var a=i("f0d8");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=i("4f06").default;o("4b0cde6a",a,!0,{sourceMap:!1,shadowMode:!1})},c979:function(e,t,i){var a=i("7d01");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=i("4f06").default;o("7d750f14",a,!0,{sourceMap:!1,shadowMode:!1})},d10d:function(e,t,i){"use strict";var a=i("c979"),o=i.n(a);o.a},e0b0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{orderCreateData:{},orderPaymentData:{exchange_info:{type:0}},type:1,isSub:!1}},methods:{openPopup:function(e){this.$refs[e].open()},closePopup:function(e){this.$refs[e].close()},selectAddress:function(){this.$util.redirectTo("/otherpages/member/address/address",{back:"/promotionpages/point/payment/payment"})},getOrderPaymentData:function(){var e=this;this.orderCreateData=uni.getStorageSync("exchangeOrderCreateData"),this.orderCreateData?(this.orderCreateData.buyer_message="",this.$api.sendRequest({url:"/pointexchange/api/ordercreate/payment",data:this.orderCreateData,success:function(t){if(-1==t.code&&"TOKEN_ERROR"==t.error_code){e.$util.showToast({title:"登录失败"});var i=getCurrentPages(),a=i[i.length-1].options,o=i[i.length-1].route;return a.back=o,void setTimeout((function(){e.$util.redirectTo("/pages/login/login/login",a)}),1500)}t.code>=0?(e.orderPaymentData=t.data,e.$refs.loadingCover&&e.$refs.loadingCover.hide()):e.$util.showToast({title:"未获取到创建订单所需数据!！",success:function(){setTimeout((function(){e.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}),1500)}})},fail:function(t){e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})):this.$util.showToast({title:"未获取到创建订单所需数据!！",success:function(){setTimeout((function(){e.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}),1500)}})},handlePaymentData:function(){},orderCreate:function(){var e=this;if(this.verify()){if(this.isSub)return;this.isSub=!0;var t=this.$util.deepClone(this.orderCreateData);t.delivery=JSON.stringify(t.delivery),t.coupon=JSON.stringify(t.coupon),t.member_address=JSON.stringify(t.member_address),this.$api.sendRequest({url:"/pointexchange/api/ordercreate/create",data:t,success:function(t){if(-1==t.code&&"TOKEN_ERROR"==t.error_code){e.$util.showToast({title:"登录失败"});var i=getCurrentPages(),a=i[i.length-1].options,o=i[i.length-1].route;return a.back=o,void setTimeout((function(){e.$util.redirectTo("/pages/login/login/login",a)}),1500)}t.code>=0?uni.removeStorage({key:"exchangeOrderCreateData",success:function(){e.$util.redirectTo("/promotionpages/point/result/result",{},"redirectTo")}}):(e.isSub=!1,e.$util.showToast({title:t.message}))}})}},verify:function(){return!(1==this.orderPaymentData.exchange_info.type&&!this.orderPaymentData.member_address)||(this.$util.showToast({title:"请先选择您的收货地址"}),!1)},imageError:function(){var e="";1==this.type?e=this.$util.img("upload/uniapp/point/gift.png"):2==this.type?e=this.$util.img("upload/uniapp/point/coupon.png"):3==this.type&&(e=this.$util.img("upload/uniapp/point/hongbao.png")),this.orderPaymentData.exchange_info.image=e,this.$forceUpdate()}},onShow:function(){this.$langConfig.refresh(),uni.getStorageSync("token")?this.getOrderPaymentData():this.$util.redirectTo("/pages/login/login/login")}};t.default=a},f0d8:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,"[data-v-0e7e9cb4] .uni-popup__wrapper.uni-custom .uni-popup__wrapper-box{background:none;max-height:unset!important;overflow-y:hidden!important}",""]),e.exports=t}}]);