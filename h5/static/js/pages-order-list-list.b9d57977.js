(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-list-list"],{"077c":function(e,t,i){var o=i("24fb");t=o(!1),t.push([e.i,"[data-v-e9067e58] .uni-page{overflow:hidden}[data-v-e9067e58] .mescroll-upwarp{padding-bottom:%?100?%}",""]),e.exports=t},"6ffd":function(e,t,i){var o=i("f828");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=i("4f06").default;r("4fa50ea5",o,!0,{sourceMap:!1,shadowMode:!1})},"7aae":function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return o}));var o={nsEmpty:i("916e").default,loadingCover:i("1ba8").default},r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"order-container",class:e.themeStyle},[i("v-uni-scroll-view",{staticClass:"order-nav",attrs:{id:"tab-bar","scroll-x":!0,"show-scrollbar":!1,"scroll-into-view":e.scrollInto}},e._l(e.statusList,(function(t,o){return i("v-uni-view",{key:o,staticClass:"uni-tab-item",attrs:{id:t.id,"data-current":o},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ontabtap.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"uni-tab-item-title",class:t.status==e.orderStatus?"uni-tab-item-title-active ns-border-color ns-text-color":""},[e._v(e._s(t.name))])],1)})),1),i("mescroll-uni",{ref:"mescroll",attrs:{top:"100rpx"},on:{getData:function(t){arguments[0]=t=e.$handleEvent(t),e.getListData.apply(void 0,arguments)}}},[i("template",{attrs:{slot:"list"},slot:"list"},[e.orderList.length>0?i("v-uni-view",{staticClass:"order-list"},e._l(e.orderList,(function(t,o){return i("v-uni-view",{key:o,staticClass:"order-item"},[i("v-uni-view",{staticClass:"order-header",class:{waitpay:"waitpay"==e.orderStatus&&0==t.order_status}},["waitpay"==e.orderStatus&&0==t.order_status?i("v-uni-view",{staticClass:"iconfont",class:-1==e.$util.inArray(t.order_id,e.mergePayOrder)?"iconyuan_checkbox":"iconyuan_checked ns-text-color",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.selectOrder(t.order_id)}}}):e._e(),i("v-uni-view",{staticClass:"iconfont icondianpu",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.toShopDetail(t.site_id)}}}),i("v-uni-text",{staticClass:"site-name",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.toShopDetail(t.site_id)}}},[e._v(e._s(t.site_name))]),i("v-uni-view",{staticClass:"iconfont iconright",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.toShopDetail(t.site_id)}}}),i("v-uni-text",{staticClass:"status-name ns-text-color"},[e._v(e._s(t.order_status_name))])],1),i("v-uni-view",{staticClass:"order-body",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.orderDetail(t)}}},e._l(t.order_goods,(function(t,r){return i("v-uni-view",{key:r,staticClass:"goods-wrap"},[i("v-uni-view",{staticClass:"goods-img"},[i("v-uni-image",{attrs:{src:e.$util.img(t.sku_image,{size:"mid"}),mode:"aspectFill","lazy-load":!0},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.imageError(o,r)}}})],1),i("v-uni-view",{staticClass:"goods-info"},[i("v-uni-view",{staticClass:"goods-name"},[e._v(e._s(t.sku_name))]),i("v-uni-view",{staticClass:"goods-sub-section"},[i("v-uni-view",[i("v-uni-text",{staticClass:"goods-price ns-text-color"},[i("v-uni-text",{staticClass:"unit"},[e._v(e._s(e.$lang("common.currencySymbol")))]),i("v-uni-text",[e._v(e._s(t.price))])],1)],1),i("v-uni-view",[i("v-uni-text",[i("v-uni-text",{staticClass:"iconfont iconclose"}),e._v(e._s(t.num))],1)],1)],1),i("v-uni-view",{staticClass:"goods-operation"})],1)],1)})),1),i("v-uni-view",{staticClass:"order-footer"},[i("v-uni-view",{staticClass:"order-base-info"},[i("v-uni-view",{staticClass:"order-type"},[i("v-uni-text",{staticClass:"ns-text-color"},[e._v(e._s(t.order_type_name))])],1),i("v-uni-view",{staticClass:"total"},[i("v-uni-text",[e._v("共"+e._s(t.goods_num)+"件商品")]),i("v-uni-text",[e._v("应付："),i("v-uni-text",{staticClass:"ns-font-size-sm"},[e._v(e._s(e.$lang("common.currencySymbol")))]),e._v(e._s(t.pay_money))],1)],1)],1),t.action.length>0?i("v-uni-view",{staticClass:"order-operation"},[1==t.is_evaluate?i("v-uni-view",{staticClass:"order-box-btn",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.operation("memberOrderEvaluation",t)}}},[0==t.evaluate_status?i("v-uni-text",[e._v("评价")]):1==t.evaluate_status?i("v-uni-text",[e._v("追评")]):e._e()],1):e._e(),e._l(t.action,(function(o,r){return i("v-uni-view",{key:r,staticClass:"order-box-btn",class:{"order-pay":"orderPay"==o.action},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.operation(o.action,t)}}},[e._v(e._s(o.title))])}))],2):0==t.action.length&&1==t.is_evaluate?i("v-uni-view",{staticClass:"order-operation"},[1==t.is_evaluate?i("v-uni-view",{staticClass:"order-box-btn",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.operation("memberOrderEvaluation",t)}}},[0==t.evaluate_status?i("v-uni-text",[e._v("评价")]):1==t.evaluate_status?i("v-uni-text",[e._v("追评")]):e._e()],1):e._e()],1):e._e()],1)],1)})),1):i("v-uni-view",[i("ns-empty",{attrs:{isIndex:!1,text:e.text}})],1)],1)],2),e.mergePayOrder.length?i("v-uni-view",{staticClass:"order-batch-operation bottom-safe-area"},[i("v-uni-view",{staticClass:"operation-btn ns-text-color ns-border-color",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.mergePay.apply(void 0,arguments)}}},[e._v("合并付款")])],1):e._e(),i("loading-cover",{ref:"loadingCover"})],1)},a=[]},"88d9":function(e,t,i){"use strict";var o=i("6ffd"),r=i.n(o);r.a},"8bbf":function(e,t,i){var o=i("077c");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=i("4f06").default;r("ee6d9808",o,!0,{sourceMap:!1,shadowMode:!1})},9010:function(e,t,i){"use strict";var o=i("8bbf"),r=i.n(o);r.a},ab6a:function(e,t,i){"use strict";i.r(t);var o=i("7aae"),r=i("b1b8");for(var a in r)"default"!==a&&function(e){i.d(t,e,(function(){return r[e]}))}(a);i("88d9"),i("9010");var s,n=i("f0c5"),d=Object(n["a"])(r["default"],o["b"],o["c"],!1,null,"e9067e58",null,!1,o["a"],s);t["default"]=d.exports},b1b8:function(e,t,i){"use strict";i.r(t);var o=i("d271"),r=i.n(o);for(var a in o)"default"!==a&&function(e){i.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},d271:function(e,t,i){"use strict";var o=i("4ea4");i("99af"),i("a434"),i("d3b7"),i("e25e"),i("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(i("dcdf")),a={data:function(){return{scrollInto:"",orderStatus:"all",statusList:[],orderList:[],contentText:{},mergePayOrder:[],text:"您还暂无相关订单"}},mixins:[r.default],onLoad:function(e){e.status&&(this.orderStatus=e.status)},onShow:function(){this.$langConfig.refresh(),this.getOrderStatus(),uni.getStorageSync("token")?this.$refs.mescroll&&this.$refs.mescroll.refresh():this.$util.redirectTo("/pages/login/login/login",{back:"/pages/order/list/list?status="+this.orderStatus})},methods:{ontabtap:function(e){var t=e.target.dataset.current||e.currentTarget.dataset.current;this.orderStatus=this.statusList[t].status,"all"==this.orderStatus?this.text="您还暂无相关订单":"waitpay"==this.orderStatus?this.text="您还暂无待付款订单":"waitsend"==this.orderStatus?this.text="您还暂无待发货订单":"waitconfirm"==this.orderStatus?this.text="您还暂无待收货订单":this.text="您还暂无待评价订单",""==this.orderStatus&&(this.mergePayOrder=[]),this.$refs.loadingCover.show(),this.$refs.mescroll.refresh()},getListData:function(e){var t=this;this.$api.sendRequest({url:"/api/order/lists",data:{page:e.num,page_size:e.size,order_status:this.orderStatus},success:function(i){if(-1==i.code&&"TOKEN_ERROR"==i.error_code){t.$util.showToast({title:"登录失败"});var o=getCurrentPages(),r=o[o.length-1].options,a=o[o.length-1].route;return r.back=a,void setTimeout((function(){t.$util.redirectTo("/pages/login/login/login",r)}),1500)}var s=[],n=i.message;0==i.code&&i.data?s=i.data.list:t.$util.showToast({title:n}),e.endSuccess(s.length),1==e.num&&(t.orderList=[]),t.orderList=t.orderList.concat(s),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(i){e.endErr(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},getOrderStatus:function(){this.statusList=[{status:"all",name:this.$lang("all"),id:"status_0"},{status:"waitpay",name:this.$lang("waitPay"),id:"status_1"},{status:"waitsend",name:this.$lang("readyDelivery"),id:"status_2"},{status:"waitconfirm",name:this.$lang("waitDelivery"),id:"status_3"},{status:"waitrate",name:this.$lang("waitEvaluate"),id:"status_4"}]},operation:function(e,t){var i=this;this.status;switch(e){case"orderPay":this.orderPay(t);break;case"orderClose":this.orderClose(t.order_id,(function(){i.$refs.mescroll.refresh()}));break;case"memberTakeDelivery":this.orderDelivery(t.order_id,(function(){i.$refs.mescroll.refresh()}));break;case"trace":this.$util.redirectTo("/pages/order/logistics/logistics",{order_id:t.order_id});break;case"memberOrderEvaluation":this.$util.redirectTo("/otherpages/order/evaluate/evaluate",{order_id:t.order_id});break}},orderDetail:function(e){switch(parseInt(e.order_type)){case 2:this.$util.redirectTo("/pages/order/detail_pickup/detail_pickup",{order_id:e.order_id});break;case 3:this.$util.redirectTo("/pages/order/detail_local_delivery/detail_local_delivery",{order_id:e.order_id});break;case 4:this.$util.redirectTo("/pages/order/detail_virtual/detail_virtual",{order_id:e.order_id});break;default:this.$util.redirectTo("/pages/order/detail/detail",{order_id:e.order_id});break}},selectOrder:function(e){-1!=this.$util.inArray(e,this.mergePayOrder)?this.mergePayOrder.splice(this.$util.inArray(e,this.mergePayOrder),1):this.mergePayOrder.push(e)},mergePay:function(){var e=this;this.mergePayOrder.length&&this.$api.sendRequest({url:"/api/order/pay",data:{order_ids:this.mergePayOrder.toString()},success:function(t){t.code>=0?e.$util.redirectTo("/pages/pay/index/index",{code:t.data}):e.$util.showToast({title:t.message})}})},imageError:function(e,t){this.orderList[e].order_goods[t].sku_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},toShopDetail:function(e){this.$util.redirectTo("/otherpages/shop/index/index",{site_id:e})}},computed:{mpOrderList:function(){if(this.orderList[this.status])return this.orderList[this.status].list||[]},themeStyle:function(){return"theme-"+this.$store.state.themeStyle}}};t.default=a},dcdf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={methods:{orderPay:function(e){var t=this;0==e.adjust_money?this.$api.sendRequest({url:"/api/order/pay",data:{order_ids:e.order_id},success:function(e){e.code>=0?t.$util.redirectTo("/pages/pay/index/index",{code:e.data}):t.$util.showToast({title:e.message})}}):uni.showModal({title:"提示",content:"商家已将支付金额调整为"+e.pay_money+"元，是否继续支付？",success:function(i){i.confirm&&t.$api.sendRequest({url:"/api/order/pay",data:{order_ids:e.order_id},success:function(e){e.code>=0?t.$util.redirectTo("/pages/pay/index/index",{code:e.data}):t.$util.showToast({title:e.message})}})}})},orderClose:function(e,t){var i=this;uni.showModal({title:"提示",content:"您确定要关闭该订单吗？",success:function(o){o.confirm&&i.$api.sendRequest({url:"/api/order/close",data:{order_id:e},success:function(e){e.code>=0?"function"==typeof t&&t():i.$util.showToast({title:e.message})}})}})},orderDelivery:function(e,t){var i=this;uni.showModal({title:"提示",content:"您确定已经收到货物了吗？",success:function(o){o.confirm&&i.$api.sendRequest({url:"/api/order/takedelivery",data:{order_id:e},success:function(e){"function"==typeof t&&t()}})}})}}};t.default=o},f828:function(e,t,i){var o=i("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/**  -------------------------------------------------------------------默认主题颜色配置-------------------------------------------------- */\n/**  -------------------------------------------------------------------蓝色主题颜色配置-------------------------------------------------- */\n/**  -------------------------------------------------------------------绿色主题颜色配置-------------------------------------------------- */\n/* 文字基本颜色 */\n/* 文字尺寸 */.order-container[data-v-e9067e58]{width:100vw;height:100vh}.order-nav[data-v-e9067e58]{width:100vw;height:%?70?%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;white-space:nowrap;background:#fff;border-bottom-left-radius:%?24?%;border-bottom-right-radius:%?24?%;padding-bottom:%?30?%;position:fixed;left:0;z-index:998}.order-nav .uni-tab-item[data-v-e9067e58]{display:inline-block;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;padding-left:%?24?%;padding-right:%?24?%}.order-nav .uni-tab-item-title[data-v-e9067e58]{color:#555;font-size:%?30?%;display:block;height:%?64?%;line-height:%?64?%;border-bottom:2px solid #fff;padding:0 %?10?%;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;white-space:nowrap}.order-nav .uni-tab-item-title-active[data-v-e9067e58]{display:block;height:%?64?%;border-bottom:2px solid #fff;padding:0 %?10?%}.order-nav[data-v-e9067e58] ::-webkit-scrollbar{width:0;height:0;color:transparent}.order-item[data-v-e9067e58]{margin:%?20?%;padding:%?20?%;border-radius:4px;background:#fff;position:relative}.order-item .order-header[data-v-e9067e58]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:relative}.order-item .order-header.waitpay[data-v-e9067e58]{padding-left:%?50?%}.order-item .order-header.waitpay .iconyuan_checked[data-v-e9067e58],\n.order-item .order-header.waitpay .iconyuan_checkbox[data-v-e9067e58]{font-size:%?36?%;position:absolute;top:50%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.order-item .order-header.waitpay .iconyuan_checkbox[data-v-e9067e58]{color:#898989}.order-item .order-header .icondianpu[data-v-e9067e58]{display:inline-block;line-height:1;margin-right:%?12?%;font-size:%?30?%}.order-item .order-header .status-name[data-v-e9067e58]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:right}.order-item .order-body .goods-wrap[data-v-e9067e58]{margin-bottom:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;position:relative}.order-item .order-body .goods-wrap[data-v-e9067e58]:last-of-type{margin-bottom:0}.order-item .order-body .goods-wrap .goods-img[data-v-e9067e58]{width:%?180?%;height:%?180?%;padding:%?20?% 0 0 0;margin-right:%?20?%}.order-item .order-body .goods-wrap .goods-img uni-image[data-v-e9067e58]{width:100%;height:100%;border-radius:4px}.order-item .order-body .goods-wrap .goods-info[data-v-e9067e58]{-webkit-box-flex:1;-webkit-flex:1;flex:1;position:relative;padding:%?20?% 0 0 0;max-width:calc(100% - %?200?%)}.order-item .order-body .goods-wrap .goods-info .goods-name[data-v-e9067e58]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;line-height:1.5;font-size:%?28?%}.order-item .order-body .goods-wrap .goods-info .goods-sub-section[data-v-e9067e58]{width:100%;line-height:1.3;display:-webkit-box;display:-webkit-flex;display:flex}.order-item .order-body .goods-wrap .goods-info .goods-sub-section .goods-price[data-v-e9067e58]{font-weight:700;font-size:15px}.order-item .order-body .goods-wrap .goods-info .goods-sub-section .unit[data-v-e9067e58]{font-weight:400;font-size:%?24?%;margin-right:%?2?%}.order-item .order-body .goods-wrap .goods-info .goods-sub-section uni-view[data-v-e9067e58]{-webkit-box-flex:1;-webkit-flex:1;flex:1;line-height:1.3}.order-item .order-body .goods-wrap .goods-info .goods-sub-section uni-view[data-v-e9067e58]:last-of-type{text-align:right}.order-item .order-body .goods-wrap .goods-info .goods-sub-section uni-view:last-of-type .iconfont[data-v-e9067e58]{line-height:1;font-size:%?26?%}.order-item .order-body .goods-wrap .goods-info .goods-operation[data-v-e9067e58]{text-align:right;padding-top:%?20?%}.order-item .order-body .goods-wrap .goods-info .goods-operation .operation-btn[data-v-e9067e58]{line-height:1;padding:%?14?% %?20?%;color:#333;display:inline-block;border-radius:%?28?%;background:#fff;border:.5px solid #999;font-size:%?24?%;margin-left:%?10?%}.order-item .order-footer .order-base-info[data-v-e9067e58]{display:-webkit-box;display:-webkit-flex;display:flex}.order-item .order-footer .order-base-info .total[data-v-e9067e58]{text-align:right;padding-top:%?20?%;-webkit-box-flex:1;-webkit-flex:1;flex:1}.order-item .order-footer .order-base-info .total > uni-text[data-v-e9067e58]{line-height:1;margin-left:%?10?%}.order-item .order-footer .order-base-info .order-type[data-v-e9067e58]{padding-top:%?20?%;-webkit-box-flex:0.5;-webkit-flex:0.5;flex:0.5}.order-item .order-footer .order-base-info .order-type > uni-text[data-v-e9067e58]{line-height:1}.order-item .order-footer .order-operation[data-v-e9067e58]{text-align:right;padding-top:%?20?%}.order-item .order-footer .order-operation .operation-btn[data-v-e9067e58]{line-height:1;padding:%?20?% %?26?%;color:#333;display:inline-block;border-radius:%?32?%;background:#fff;border:.5px solid #999;font-size:%?24?%;margin-left:%?10?%}.empty[data-v-e9067e58]{padding-top:%?200?%;text-align:center}.empty .empty-image[data-v-e9067e58]{width:%?180?%;height:%?180?%}.order-batch-operation[data-v-e9067e58]{position:fixed;z-index:5;left:0;bottom:0;width:100vw;height:%?100?%;background:#fff;box-shadow:0 0 10px rgba(0,0,0,.1);text-align:right}.order-batch-operation.bottom-safe-area[data-v-e9067e58]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.order-batch-operation .operation-btn[data-v-e9067e58]{height:%?68?%;line-height:%?68?%;background:#fff;padding:0 %?40?%;display:inline-block;text-align:center;margin:%?16?% %?20?% %?16?% 0;border-radius:%?40?%;border:.5px solid #fff}.order-batch-operation .operation-btn.white[data-v-e9067e58]{height:%?68?%;line-height:%?68?%;color:#333;border:.5px solid #999;background:#fff}',""]),e.exports=t}}]);