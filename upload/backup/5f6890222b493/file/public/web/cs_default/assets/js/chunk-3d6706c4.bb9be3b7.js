(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d6706c4"],{6404:function(e,a,t){},"692f":function(e,a,t){"use strict";var o=t("6404"),r=t.n(o);r.a},a135:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingAd,expression:"loadingAd"}],staticClass:"ns-login-wrap",style:{background:e.backgroundColor}},[t("div",{staticClass:"el-row-wrap el-row-wrap-login"},[t("el-row",[t("el-col",{attrs:{span:13}},[t("el-carousel",{staticClass:"ns-login-bg",attrs:{height:"460px"},on:{change:e.handleChange}},e._l(e.adList,(function(a){return t("el-carousel-item",{key:a.adv_id},[t("el-image",{attrs:{src:e.$img(a.adv_image),fit:"cover"},on:{click:function(t){return e.$router.pushToTab(a.adv_url.url)}}})],1)})),1)],1),t("el-col",{staticClass:"ns-login-form",attrs:{span:11}},[t("div",{staticClass:"grid-content bg-purple"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"用户登录",name:"first"}},["first"==e.activeName?t("el-form",{ref:"ruleForm",attrs:{model:e.formData,rules:e.accountRules}},[t("el-form-item",{attrs:{prop:"account"}},[t("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.formData.account,callback:function(a){e.$set(e.formData,"account",a)},expression:"formData.account"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"iconfont iconzhanghao"})])],2)],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入登录密码"},model:{value:e.formData.password,callback:function(a){e.$set(e.formData,"password",a)},expression:"formData.password"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"iconfont iconmima"})])],2)],1),t("el-form-item",{attrs:{prop:"vercode"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入验证码",maxlength:"4"},model:{value:e.formData.vercode,callback:function(a){e.$set(e.formData,"vercode",a)},expression:"formData.vercode"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"iconfont iconyanzhengma"})]),t("template",{slot:"append"},[t("img",{staticClass:"captcha",attrs:{src:e.captcha.img,mode:""},on:{click:e.getCaptcha}})])],2)],1),t("el-form-item",[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-checkbox",{model:{value:e.formData.checked,callback:function(a){e.$set(e.formData,"checked",a)},expression:"formData.checked"}},[e._v("七天自动登录")])],1),t("el-col",{staticClass:"ns-forget-pass",attrs:{span:12}},[t("router-link",{attrs:{to:"/find_pass"}},[e._v("忘记密码")])],1)],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.accountLogin("ruleForm")}}},[e._v("登录")])],1),t("el-form-item",[t("el-row",[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"bg-purple-light"},[t("router-link",{attrs:{to:"/register"}},[e._v("立即注册")]),t("i",{staticClass:"iconfont iconarrow-right"})],1)])],1)],1)],1):e._e()],1),1==e.registerConfig.dynamic_code_login?t("el-tab-pane",{attrs:{label:"手机动态码登录",name:"second"}},["second"==e.activeName?t("el-form",{ref:"mobileRuleForm",staticClass:"ns-login-mobile",attrs:{model:e.formData,rules:e.mobileRules}},[t("el-form-item",{attrs:{prop:"mobile"}},[t("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.formData.mobile,callback:function(a){e.$set(e.formData,"mobile",a)},expression:"formData.mobile"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"iconfont iconshouji-copy"})])],2)],1),t("el-form-item",{attrs:{prop:"vercode"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入验证码",maxlength:"4"},model:{value:e.formData.vercode,callback:function(a){e.$set(e.formData,"vercode",a)},expression:"formData.vercode"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"iconfont iconyanzhengma"})]),t("template",{slot:"append"},[t("img",{staticClass:"captcha",attrs:{src:e.captcha.img,mode:""},on:{click:e.getCaptcha}})])],2)],1),t("el-form-item",{attrs:{prop:"dynacode"}},[t("el-input",{attrs:{maxlength:"4",placeholder:"请输入短信动态码"},model:{value:e.formData.dynacode,callback:function(a){e.$set(e.formData,"dynacode",a)},expression:"formData.dynacode"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"iconfont icondongtaima"})]),t("template",{slot:"append"},[t("div",{staticClass:"dynacode",class:120==e.dynacodeData.seconds?"ns-text-color":"ns-text-color-gray",on:{click:function(a){return e.sendMobileCode("mobileRuleForm")}}},[e._v(" "+e._s(e.dynacodeData.codeText)+" ")])])],2)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.mobileLogin("mobileRuleForm")}}},[e._v("登录")])],1),t("el-form-item",[t("el-row",[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"bg-purple-light"},[t("router-link",{attrs:{to:"/register"}},[e._v("立即注册")]),t("i",{staticClass:"iconfont iconarrow-right"})],1)])],1)],1)],1):e._e()],1):e._e()],1)],1)])],1)],1)])},r=[],i=(t("ac1f"),t("5319"),t("7401")),c=t("37cb"),s={data:function(){var e=function(e,a,t){if(!a)return t(new Error("手机号不能为空"));var o=/^1[3|4|5|6|7|8|9][0-9]{9}$/;o.test(a)?t():t(new Error("请输入正确的手机号"))};return{loginMode:"account",activeName:"first",formData:{account:"",password:"",vercode:"",mobile:"",dynacode:"",key:"",checked:!1,autoLoginRange:7},captcha:{id:"",img:""},dynacodeData:{seconds:120,timer:null,codeText:"获取动态码",isSend:!1},isSub:!1,registerConfig:{is_enable:1},accountRules:{account:[{required:!0,message:"请输入登录账号",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}],vercode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},mobileRules:{mobile:[{required:!0,validator:e,trigger:"blur"}],vercode:[{required:!0,message:"请输入验证码",trigger:"blur"}],dynacode:[{required:!0,message:"请输入短信动态码",trigger:"blur"}]},codeRules:{mobile:[{required:!0,validator:e,trigger:"blur"}],vercode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},loadingAd:!0,adList:[],backgroundColor:""}},created:function(){this.getAdList(),this.getCaptcha(),this.getRegisterConfig();var e=this;document.onkeypress=function(a){var t=document.all?event.keyCode:a.which;if(13==t)return"first"==e.activeName?e.accountLogin("ruleForm"):e.mobileLogin("mobileRuleForm"),!1}},watch:{"dynacodeData.seconds":{handler:function(e,a){0==e&&(clearInterval(this.dynacodeData.timer),this.dynacodeData={seconds:120,timer:null,codeText:"获取动态码",isSend:!1})},immediate:!0,deep:!0}},methods:{getAdList:function(){var e=this;Object(c["a"])({keyword:"NS_PC_LOGIN"}).then((function(a){if(0==a.code&&a.data.adv_list){e.adList=a.data.adv_list;for(var t=0;t<e.adList.length;t++)e.adList[t].adv_url&&(e.adList[t].adv_url=JSON.parse(e.adList[t].adv_url));e.backgroundColor=e.adList[0].background}e.loadingAd=!1})).catch((function(a){e.loadingAd=!1}))},handleClick:function(e,a){"first"==this.activeName?this.loginMode="account":this.loginMode="mobile"},handleChange:function(e,a){this.backgroundColor=this.adList[e].background},accountLogin:function(e){var a=this;this.$refs[e].validate((function(e){if(!e)return!1;var t={username:a.formData.account,password:a.formData.password};""!=a.captcha.id&&(t.captcha_id=a.captcha.id,t.captcha_code=a.formData.vercode),a.formData.checked&&(t.autoLoginRange=a.formData.autoLoginRange),a.isSub||(a.isSub=!0,a.$store.dispatch("member/login",t).then((function(e){if(e.code>=0)if(a.$message({message:"登录成功！",type:"success"}),a.$route.query.redirect){a.$route.query.redirect,a.$route.query;a.$router.push(a.$route.query.redirect)}else a.$router.push({name:"member"});else a.isSub=!1,a.getCaptcha(),a.$message({message:e.message,type:"warning"})})).catch((function(e){a.isSub=!1,a.$message.error(e.message),a.getCaptcha()})))}))},mobileLogin:function(e){var a=this;this.$refs[e].validate((function(e){if(!e)return!1;var t={mobile:a.formData.mobile,key:a.formData.key,code:a.formData.dynacode};""!=a.captcha.id&&(t.captcha_id=a.captcha.id,t.captcha_code=a.formData.vercode),a.isSub||(a.isSub=!0,a.$store.dispatch("member/mobile_login",t).then((function(e){e.code>=0?(a.$message({message:"登录成功！",type:"success"}),a.$route.query.redirect?a.$router.push(a.$route.query.redirect):a.$router.push({name:"member"})):(a.isSub=!1,a.getCaptcha(),a.$message({message:e.message,type:"warning"}))})).catch((function(e){a.isSub=!1,a.$message.error(e.message),a.getCaptcha()})))}))},getRegisterConfig:function(){var e=this;Object(i["f"])().then((function(a){a.code>=0&&(e.registerConfig=a.data.value,1==e.registerConfig.dynamic_code_login?e.loginMode="mobile":e.loginMode="account")})).catch((function(e){console.log(e.message)}))},getCaptcha:function(){var e=this;Object(c["b"])({captcha_id:this.captcha.id}).then((function(a){a.code>=0&&(e.captcha.id=a.data.id,e.captcha.img=a.data.img,e.captcha.img=e.captcha.img.replace(/\r\n/g,""))})).catch((function(a){e.$message.error(a.message)}))},sendMobileCode:function(e){var a=this;120==this.dynacodeData.seconds&&(this.$refs[e].clearValidate("dynacode"),this.$refs[e].validateField("mobile",(function(e){if(e)return!1})),this.$refs[e].validateField("vercode",(function(e){if(e)return!1;Object(i["b"])({mobile:a.formData.mobile,captcha_id:a.captcha.id,captcha_code:a.formData.vercode}).then((function(e){e.code>=0&&(a.formData.key=e.data.key,120==a.dynacodeData.seconds&&null==a.dynacodeData.timer&&(a.dynacodeData.timer=setInterval((function(){a.dynacodeData.seconds--,a.dynacodeData.codeText=a.dynacodeData.seconds+"s后可重新获取"}),1e3)))})).catch((function(e){a.$message.error(e.message)}))})))}}},n={name:"login",mixins:[s]},l=n,d=(t("692f"),t("c6e2"),t("2877")),m=Object(d["a"])(l,o,r,!1,null,"297b2bf4",null);a["default"]=m.exports},c6e2:function(e,a,t){"use strict";var o=t("d4cb"),r=t.n(o);r.a},d4cb:function(e,a,t){}}]);
//# sourceMappingURL=chunk-3d6706c4.bb9be3b7.js.map