(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19ee5599"],{"0603":function(e,t,r){"use strict";var a=r("508f"),n=r.n(a);n.a},3698:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.yes,expression:"yes"}],staticClass:"null-page"}),r("el-card",{staticClass:"box-card order-list"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("我的订单")])]),r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.orderStatus,callback:function(t){e.orderStatus=t},expression:"orderStatus"}},[r("el-tab-pane",{attrs:{label:"全部订单",name:"all"}}),r("el-tab-pane",{attrs:{label:"待付款",name:"waitpay"}}),r("el-tab-pane",{attrs:{label:"待发货",name:"waitsend"}}),r("el-tab-pane",{attrs:{label:"待收货",name:"waitconfirm"}}),r("el-tab-pane",{attrs:{label:"待评价",name:"waitrate"}})],1),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("nav",[r("li",[e._v("商品信息")]),r("li",[e._v("单价")]),r("li",[e._v("数量")]),r("li",[e._v("实付款")]),r("li",[e._v("订单状态")]),r("li",[e._v("操作")])]),e.orderList.length>0?r("div",{staticClass:"list"},e._l(e.orderList,(function(t,a){return r("div",{key:a,staticClass:"item"},[r("div",{staticClass:"head"},[r("span",{staticClass:"create-time"},[e._v(e._s(e.$util.timeStampTurnTime(t.create_time)))]),r("span",{staticClass:"order-no"},[e._v("订单号："+e._s(t.order_no))]),r("router-link",{attrs:{to:"/shop-"+t.site_id,target:"_blank"}},[e._v(e._s(t.site_name))]),r("span",{staticClass:"order-type"},[e._v(e._s(t.order_type_name))])],1),e._l(t.order_goods,(function(n,i){return r("ul",{key:i},[r("li",[r("div",{staticClass:"img-wrap",on:{click:function(t){return e.$router.pushToTab("/sku-"+n.sku_id)}}},[r("img",{attrs:{src:e.$img(n.sku_image,{size:"mid"})},on:{error:function(t){return e.imageError(a,i)}}})]),r("div",{staticClass:"info-wrap",on:{click:function(t){return e.$router.pushToTab("/sku-"+n.sku_id)}}},[r("h5",[e._v(e._s(n.sku_name))])])]),r("li",[r("span",[e._v("￥"+e._s(n.price))])]),r("li",[r("span",[e._v(e._s(n.num))])]),r("li",[r("span",[e._v("￥"+e._s(t.pay_money))])]),0==i?[r("li",[r("span",{staticClass:"ns-text-color"},[e._v(e._s(t.order_status_name))]),r("el-link",{attrs:{underline:!1},on:{click:function(r){return e.orderDetail(t)}}},[e._v("订单详情")])],1),r("li",[t.action.length>0?[1==t.is_evaluate?r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(r){return e.operation("memberOrderEvaluation",t)}}},[0==t.evaluate_status?[e._v(" 评价 ")]:1==t.evaluate_status?[e._v(" 追评 ")]:e._e()],2):e._e(),e._l(t.action,(function(a,n){return r("el-button",{key:n,attrs:{type:"primary",size:"mini",plain:"orderPay"!=a.action},on:{click:function(r){return e.operation(a.action,t)}}},[e._v(" "+e._s(a.title)+" ")])}))]:0==t.action.length&&1==t.is_evaluate?[1==t.is_evaluate?r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(r){return e.operation("memberOrderEvaluation",t)}}},[0==t.evaluate_status?[e._v(" 评价 ")]:1==t.evaluate_status?[e._v(" 追评 ")]:e._e()],2):e._e()]:e._e()],2)]:e._e()],2)}))],2)})),0):e.loading||0!=e.orderList.length?e._e():r("div",{staticClass:"empty-wrap"},[e._v("暂无相关订单")])]),r("div",{staticClass:"pager"},[r("el-pagination",{attrs:{background:"","pager-count":5,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-size":e.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handlePageSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},n=[],i=(r("b0c0"),r("5530")),o=r("2f62"),s=r("dea0"),u=r("6554"),c={name:"order_list",components:{},data:function(){return{orderStatus:"all",loading:!0,orderList:[],currentPage:1,pageSize:10,total:0,yes:!0}},mixins:[u["a"]],created:function(){this.orderStatus=this.$route.query.status||"all",this.getOrderList()},computed:Object(i["a"])({},Object(o["b"])(["defaultGoodsImage"])),mounted:function(){var e=this;setTimeout((function(){e.yes=!1}),300)},methods:{handleClick:function(e,t){this.currentPage=1,this.orderStatus=e.name,this.refresh()},getOrderList:function(){var e=this;Object(s["c"])({page:this.currentPage,page_size:this.pageSize,order_status:this.orderStatus}).then((function(t){var r=[];0==t.code&&t.data&&(r=t.data.list,e.total=t.data.count),e.orderList=r,e.loading=!1})).catch((function(t){e.loading=!1}))},handlePageSizeChange:function(e){this.pageSize=e,this.refresh()},handleCurrentPageChange:function(e){this.currentPage=e,this.refresh()},refresh:function(){this.loading=!0,this.getOrderList()},operation:function(e,t){var r=this;this.status;switch(e){case"orderPay":this.orderPay(t);break;case"orderClose":this.orderClose(t.order_id,(function(){r.refresh()}));break;case"memberTakeDelivery":this.orderDelivery(t.order_id,(function(){r.refresh()}));break;case"trace":this.$router.push({path:"/member/logistics",query:{order_id:t.order_id}});break;case"memberOrderEvaluation":this.$router.pushToTab({path:"/evaluate",query:{order_id:t.order_id}});break}},orderDetail:function(e){switch(parseInt(e.order_type)){case 2:this.$router.push({path:"/member/order_detail_pickup",query:{order_id:e.order_id}});break;case 3:this.$router.push({path:"/member/order_detail_local_delivery",query:{order_id:e.order_id}});break;case 4:this.$router.push({path:"/member/order_detail_virtual",query:{order_id:e.order_id}});break;default:this.$router.push({path:"/member/order_detail",query:{order_id:e.order_id}});break}},imageError:function(e,t){this.orderList[e].order_goods[t].sku_image=this.defaultGoodsImage}}},d=c,l=(r("0603"),r("2877")),p=Object(l["a"])(d,a,n,!1,null,"572b0b0c",null);t["default"]=p.exports},"508f":function(e,t,r){},6554:function(e,t,r){"use strict";var a=r("dea0");t["a"]={methods:{orderPay:function(e){var t=this;0==e.adjust_money?Object(a["e"])({order_ids:e.order_id}).then((function(e){e.code>=0?t.$router.push({path:"/pay",query:{code:e.data}}):t.$message({message:e.message,type:"warning"})})):this.$confirm("商家已将支付金额调整为"+e.pay_money+"元，是否继续支付？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["e"])({order_ids:e.order_id}).then((function(e){e.code>=0?t.$router.push({path:"/pay",query:{code:e.data}}):t.$message({message:e.message,type:"warning"})}))}))},orderClose:function(e,t){var r=this;this.$confirm("您确定要关闭该订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["a"])({order_id:e}).then((function(e){r.$message({message:"订单关闭成功",type:"success"}),"function"==typeof t&&t()}))}))},orderDelivery:function(e,t){var r=this;this.$confirm("您确定已经收到货物了吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["f"])({order_id:e}).then((function(e){r.$message({message:"订单收货成功",type:"success"}),"function"==typeof t&&t()}))}))}}}},dea0:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"e",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"f",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return c})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return l}));var a=r("751a");function n(e){return Object(a["a"])({url:"/api/order/lists",data:e,forceLogin:!0})}function i(e){return Object(a["a"])({url:"/api/order/pay",data:e,forceLogin:!0})}function o(e){return Object(a["a"])({url:"/api/order/close",data:e,forceLogin:!0})}function s(e){return Object(a["a"])({url:"/api/order/takedelivery",data:e,forceLogin:!0})}function u(e){return Object(a["a"])({url:"/api/order/detail",data:e,forceLogin:!0})}function c(e){return Object(a["a"])({url:"/api/order/package",data:e,forceLogin:!0})}function d(e){return Object(a["a"])({url:"/api/order/evluateinfo",data:e,forceLogin:!0})}function l(e){var t="";return t=e.isEvaluate?"/api/goodsevaluate/again":"/api/goodsevaluate/add",Object(a["a"])({url:t,data:e,forceLogin:!0})}}}]);
//# sourceMappingURL=chunk-19ee5599.d8c0113d.js.map