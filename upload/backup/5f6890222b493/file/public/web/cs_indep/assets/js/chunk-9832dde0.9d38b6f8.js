(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9832dde0"],{6554:function(e,t,r){"use strict";var a=r("dea0");t["a"]={methods:{orderPay:function(e){var t=this;0==e.adjust_money?Object(a["e"])({order_ids:e.order_id}).then((function(e){e.code>=0?t.$router.push({path:"/pay",query:{code:e.data}}):t.$message({message:e.message,type:"warning"})})):this.$confirm("商家已将支付金额调整为"+e.pay_money+"元，是否继续支付？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["e"])({order_ids:e.order_id}).then((function(e){e.code>=0?t.$router.push({path:"/pay",query:{code:e.data}}):t.$message({message:e.message,type:"warning"})}))}))},orderClose:function(e,t){var r=this;this.$confirm("您确定要关闭该订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["a"])({order_id:e}).then((function(e){r.$message({message:"订单关闭成功",type:"success"}),"function"==typeof t&&t()}))}))},orderDelivery:function(e,t){var r=this;this.$confirm("您确定已经收到货物了吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["f"])({order_id:e}).then((function(e){r.$message({message:"订单收货成功",type:"success"}),"function"==typeof t&&t()}))}))}}}},"8cca":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.yes,expression:"yes"}],staticClass:"null-page"}),r("el-card",{staticClass:"box-card order-detail"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/member/order_list"}}},[e._v("订单列表")]),r("el-breadcrumb-item",[e._v("订单详情")])],1)],1),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.orderDetail?[r("div",{staticClass:"order-status"},[r("h4",[e._v(" 订单状态： "),r("span",{staticClass:"ns-text-color"},[e._v(e._s(e.orderDetail.order_status_name))])]),0==e.orderDetail.order_status?r("div",{staticClass:"go-pay"},[r("p",[e._v(" 需付款： "),r("span",[e._v("￥"+e._s(e.orderDetail.pay_money))])])]):e._e(),e.orderDetail.action.length>0?r("div",{staticClass:"operation"},[1==e.orderDetail.is_evaluate?r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.operation("memberOrderEvaluation")}}},[0==e.orderDetail.evaluate_status?[e._v(" 评价 ")]:1==e.orderDetail.evaluate_status?[e._v(" 追评 ")]:e._e()],2):e._e(),e._l(e.orderDetail.action,(function(t,a){return r("el-button",{key:a,attrs:{type:"primary",size:"mini",plain:"orderPay"!=t.action},on:{click:function(r){return e.operation(t.action)}}},[e._v(" "+e._s(t.title)+" ")])}))],2):0==e.orderDetail.action.length&&1==e.orderDetail.is_evaluate?r("div",{staticClass:"operation"},[1==e.orderDetail.is_evaluate?r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.operation("memberOrderEvaluation")}}},[0==e.orderDetail.evaluate_status?[e._v(" 评价 ")]:1==e.orderDetail.evaluate_status?[e._v(" 追评 ")]:e._e()],2):e._e()],1):e._e()]),e.orderDetail.virtual_goods?r("div",{staticClass:"verify-code-wrap"},[r("h4",[e._v("核销信息")]),r("ul",[r("li",[e._v(" 核销码： "),r("span",{staticClass:"ns-text-color"},[e._v(e._s(e.orderDetail.virtual_code))])]),e.orderDetail.virtual_goods.is_veirfy?[r("li",[e._v("核销状态：已核销")]),r("li",[e._v("核销时间："+e._s(e.$util.timeStampTurnTime(e.orderDetail.virtual_goods.verify_time)))])]:e._e()],2),r("img",{attrs:{src:e.$img(e.orderDetail.virtualgoods)}})]):e._e(),r("div",{staticClass:"order-info"},[r("h4",[e._v("订单信息")]),r("ul",[r("li",[r("i",{staticClass:"iconfont iconmendian"}),e._v(" 店铺： "),r("router-link",{attrs:{to:"/shop-"+e.orderDetail.site_id,target:"_blank"}},[e._v(e._s(e.orderDetail.site_name))])],1),r("li",[e._v("订单类型："+e._s(e.orderDetail.order_type_name))]),r("li",[e._v("订单编号："+e._s(e.orderDetail.order_no))]),r("li",[e._v("订单交易号："+e._s(e.orderDetail.out_trade_no))]),r("li",[e._v("创建时间："+e._s(e.$util.timeStampTurnTime(e.orderDetail.create_time)))]),e.orderDetail.close_time>0?r("li",[e._v("关闭时间："+e._s(e.$util.timeStampTurnTime(e.orderDetail.close_time)))]):e._e(),e.orderDetail.pay_status>0?[r("li",[e._v("支付方式："+e._s(e.orderDetail.pay_type_name))]),r("li",[e._v("支付时间："+e._s(e.$util.timeStampTurnTime(e.orderDetail.pay_time)))])]:e._e(),""!=e.orderDetail.promotion_type_name?r("li",[e._v("店铺活动："+e._s(e.orderDetail.promotion_type_name))]):e._e(),""!=e.orderDetail.buyer_message?r("li",[e._v("买家留言："+e._s(e.orderDetail.buyer_message))]):e._e()],2)]),r("nav",[r("li",{class:{"no-operation":!e.orderDetail.is_enable_refund}},[e._v("商品信息")]),r("li",[e._v("单价")]),r("li",[e._v("数量")]),r("li",[e._v("小计")]),e.orderDetail.is_enable_refund?r("li",[e._v("操作")]):e._e()]),r("div",{staticClass:"list"},e._l(e.orderDetail.order_goods,(function(t,a){return r("ul",{key:a,staticClass:"item"},[r("li",{class:{"no-operation":!e.orderDetail.is_enable_refund}},[r("div",{staticClass:"img-wrap",on:{click:function(r){return e.$router.pushToTab("/sku-"+t.sku_id)}}},[r("img",{attrs:{src:e.$img(t.sku_image,{size:"mid"})},on:{error:function(t){return e.imageError(a)}}})]),r("div",{staticClass:"info-wrap"},[r("h5",{on:{click:function(r){return e.$router.pushToTab("/sku-"+t.sku_id)}}},[e._v(e._s(t.sku_name))])])]),r("li",[r("span",[e._v("￥"+e._s(t.price))])]),r("li",[r("span",[e._v(e._s(t.num))])]),r("li",[r("span",[e._v("￥"+e._s((t.price*t.num).toFixed(2)))])]),e.orderDetail.is_enable_refund?r("li",[0==t.refund_status||-1==t.refund_status?r("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(r){return e.$router.push({path:"/member/refund",query:{order_goods_id:t.order_goods_id}})}}},[e._v(" 退款 ")]):r("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(r){return e.$router.push({path:"/member/refund_detail",query:{order_goods_id:t.order_goods_id}})}}},[e._v(" 查看退款 ")])],1):e._e()])})),0),r("ul",{staticClass:"total"},[r("li",[r("label",[e._v("商品金额：")]),r("span",[e._v("￥"+e._s(e.orderDetail.goods_money))])]),e.orderDetail.invoice_money>0?r("li",[r("label",[e._v("税费：")]),r("span",[e._v("￥"+e._s(e.orderDetail.invoice_money))])]):e._e(),0!=e.orderDetail.adjust_money?r("li",[r("label",[e._v("订单调整：")]),r("span",[e.orderDetail.adjust_money<0?[e._v(" - ")]:[e._v(" + ")],e._v(" ￥"+e._s(e._f("abs")(e.orderDetail.adjust_money))+" ")],2)]):e._e(),e.orderDetail.promotion_money>0?r("li",[r("label",[e._v("优惠：")]),r("span",[e._v("￥"+e._s(e.orderDetail.promotion_money))])]):e._e(),e.orderDetail.coupon_money>0?r("li",[r("label",[e._v("优惠券：")]),r("span",[e._v("￥"+e._s(e.orderDetail.coupon_money))])]):e._e(),e.orderDetail.balance_money>0?r("li",[r("label",[e._v("使用余额：")]),r("span",[e._v("￥"+e._s(e.orderDetail.balance_money))])]):e._e(),r("li",{staticClass:"pay-money"},[r("label",[e._v("实付款：")]),r("span",[e._v("￥"+e._s(e.orderDetail.pay_money))])])])]:e._e()],2)])],1)},i=[],o=(r("b680"),r("5530")),n=r("dea0"),s=r("6554"),l=r("2f62"),d={name:"order_detail_virtual",components:{},mixins:[s["a"]],data:function(){return{orderId:0,orderDetail:null,loading:!0,yes:!0}},created:function(){this.orderId=this.$route.query.order_id,this.getOrderDetail()},mounted:function(){var e=this;setTimeout((function(){e.yes=!1}),300)},computed:Object(o["a"])({},Object(l["b"])(["token","defaultGoodsImage"])),methods:{getOrderDetail:function(){var e=this;Object(n["b"])({order_id:this.orderId}).then((function(t){t.code>=0?(e.orderDetail=t.data,""!=e.orderDetail.delivery_store_info&&(e.orderDetail.delivery_store_info=JSON.parse(e.orderDetail.delivery_store_info)),e.loading=!1):e.$message({message:"未获取到订单信息",type:"warning",duration:2e3,onClose:function(){e.$router.push({path:"/member/order_list"})}})})).catch((function(t){e.loading=!1,e.$message.error({message:t.message,duration:2e3,onClose:function(){e.$router.push({path:"/member/order_list"})}})}))},operation:function(e){var t=this;switch(e){case"orderPay":this.orderPay(this.orderDetail);break;case"orderClose":this.orderClose(this.orderDetail.order_id,(function(){t.getOrderDetail()}));break;case"memberOrderEvaluation":this.$router.pushToTab({path:"/evaluate",query:{order_id:this.orderDetail.order_id}});break}},imageError:function(e){this.orderDetail.order_goods[e].sku_image=this.defaultGoodsImage}},filters:{abs:function(e){return Math.abs(parseFloat(e)).toFixed(2)}}},u=d,_=(r("bee2"),r("2877")),c=Object(_["a"])(u,a,i,!1,null,"c442d9ac",null);t["default"]=c.exports},bce2:function(e,t,r){},bee2:function(e,t,r){"use strict";var a=r("bce2"),i=r.n(a);i.a},dea0:function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"a",(function(){return n})),r.d(t,"f",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"d",(function(){return d})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return _}));var a=r("751a");function i(e){return Object(a["a"])({url:"/api/order/lists",data:e,forceLogin:!0})}function o(e){return Object(a["a"])({url:"/api/order/pay",data:e,forceLogin:!0})}function n(e){return Object(a["a"])({url:"/api/order/close",data:e,forceLogin:!0})}function s(e){return Object(a["a"])({url:"/api/order/takedelivery",data:e,forceLogin:!0})}function l(e){return Object(a["a"])({url:"/api/order/detail",data:e,forceLogin:!0})}function d(e){return Object(a["a"])({url:"/api/order/package",data:e,forceLogin:!0})}function u(e){return Object(a["a"])({url:"/api/order/evluateinfo",data:e,forceLogin:!0})}function _(e){var t="";return t=e.isEvaluate?"/api/goodsevaluate/again":"/api/goodsevaluate/add",Object(a["a"])({url:t,data:e,forceLogin:!0})}}}]);
//# sourceMappingURL=chunk-9832dde0.9d38b6f8.js.map