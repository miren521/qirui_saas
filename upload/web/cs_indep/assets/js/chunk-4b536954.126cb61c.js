(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b536954"],{"30a4":function(t,e,a){},"780d":function(t,e,a){"use strict";var s=a("30a4"),n=a.n(s);n.a},a5d7:function(t,e,a){"use strict";var s=a("f61b"),n=a.n(s);n.a},d6e4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.yes,expression:"yes"}],staticClass:"null-page"}),a("el-card",{staticClass:"box-card member-coupon"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("我的优惠券")])]),a("div",[a("el-tabs",{on:{"tab-click":t.handleClickSource},model:{value:t.couponsource,callback:function(e){t.couponsource=e},expression:"couponsource"}},[a("el-tab-pane",{attrs:{label:"店铺优惠券",name:"1"}}),a("el-tab-pane",{attrs:{label:"平台优惠券",name:"2"}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-tabs",{on:{"tab-click":t.handleClickStatus},model:{value:t.couponstatus,callback:function(e){t.couponstatus=e},expression:"couponstatus"}},[a("el-tab-pane",{attrs:{label:"未使用",name:"1"}}),a("el-tab-pane",{attrs:{label:"已使用",name:"2"}}),a("el-tab-pane",{attrs:{label:"已过期",name:"3"}})],1),a("div",{staticClass:"coupon-wrap"},[t._l(t.couponList,(function(e,s){return a("div",{key:s,staticClass:"text item",class:"1"==t.state?"coupon-not-used":"2"==t.state?"coupon-used":"coupon-expire",on:{click:function(a){return t.useCoupon(e)}}},[["0.00"!=e.discount&&e.discount?a("p",{staticClass:"coupon-wrap-money"},[a("span",[t._v(t._s(e.discount))]),t._v(" 折 ")]):a("p",{staticClass:"coupon-wrap-money"},[t._v(" ￥ "),a("span",[t._v(t._s(e.money))])])],a("p",{staticClass:"coupon-wrap-name"},[t._v(t._s("1"==t.couponsource?e.coupon_name:e.platformcoupon_name))]),"1"==t.couponsource?a("p",{staticClass:"coupon-wrap-site coupon-wrap-info"},[t._v("使用店铺："+t._s(e.site_name))]):t._e(),[e.at_least>0?a("p",{staticClass:"coupon-wrap-least coupon-wrap-info"},[t._v("满"+t._s(e.at_least)+"元可用")]):a("p",{staticClass:"coupon-wrap-least coupon-wrap-info"},[t._v("无门槛优惠券")])],[e.validity_type?a("p",{staticClass:"coupon-wrap-time coupon-wrap-info"},[t._v("领取之日起"+t._s(e.fixed_term)+"日内有效")]):a("p",{staticClass:"coupon-wrap-time coupon-wrap-info"},[t._v("有效期至"+t._s(t.$timeStampTurnTime(e.end_time)))])]],2)})),0==t.couponList.length?a("div",{staticClass:"empty-text"},[t._v(t._s(t.text))]):t._e()],2),a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{background:"","pager-count":5,total:t.total,"prev-text":"上一页","next-text":"下一页","current-page":t.currentPage,"page-size":t.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handlePageSizeChange,"current-change":t.handleCurrentPageChange}})],1)],1)],1)])],1)},n=[],o=(a("b0c0"),a("5530")),i=a("69f9"),c=a("2f62"),u={name:"my_coupon",components:{},data:function(){return{total:0,currentPage:1,pageSize:9,couponsource:"1",couponstatus:"1",couponList:[],type:"",state:1,text:"您还没有优惠券哦",loading:!0,yes:!0}},created:function(){var t=this;this.addonIsExit&&1!=this.addonIsExit.coupon?this.$message({message:"优惠券插件未安装",type:"warning",duration:2e3,onClose:function(){t.$route.push("/member/index")}}):this.getListData()},mounted:function(){var t=this;setTimeout((function(){t.yes=!1}),300)},computed:Object(o["a"])({},Object(c["b"])(["addonIsExit"])),watch:{addonIsExit:function(){var t=this;1!=this.addonIsExit.coupon&&this.$message({message:"优惠券插件未安装",type:"warning",duration:2e3,onClose:function(){t.$route.push("/member/index")}})}},methods:{handleClickSource:function(t,e){this.refresh()},handleClickStatus:function(t,e){"1"==t.name?(this.state=1,this.text="您还没有优惠券哦"):"2"==t.name?(this.state=2,this.text="您还没有使用过优惠券哦"):(this.state=3,this.text="您还没有过期优惠券哦"),this.refresh()},handlePageSizeChange:function(t){this.pageSize=t,this.refresh()},handleCurrentPageChange:function(t){this.currentPage=t,this.refresh()},refresh:function(){this.loading=!0,this.getListData()},getListData:function(){var t=this;Object(i["f"])({page:this.currentPage,page_size:this.pageSize,state:this.state,is_own:this.type,couponsource:this.couponsource}).then((function(e){e.code>=0&&(t.total=e.data.count,t.couponList=e.data.list),t.loading=!1})).catch((function(e){t.loading=!1,t.$message.error(e.message)}))},useCoupon:function(t){1==t.state&&("1"==this.couponsource?1!=t.goods_type?this.$router.push({path:"/shop_list",query:{site_id:t.site_id,couponId:t.coupon_type_id}}):this.$router.push({path:"/shop_list",query:{site_id:t.site_id}}):1!=t.use_scenario?this.$router.push({path:"/list",query:{platform_coupon_type:t.platformcoupon_type_id}}):this.$router.push("/list"))}}},p=u,r=(a("a5d7"),a("780d"),a("2877")),l=Object(r["a"])(p,s,n,!1,null,"39bf2c70",null);e["default"]=l.exports},f61b:function(t,e,a){}}]);
//# sourceMappingURL=chunk-4b536954.126cb61c.js.map