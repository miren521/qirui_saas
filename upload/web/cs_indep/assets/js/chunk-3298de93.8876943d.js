(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3298de93"],{"08db":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"goods-list"},[s("div",{staticClass:"shop-left"},[s("div",{staticClass:"shop-wrap"},[s("div",{staticClass:"head-wrap"},[s("div",{staticClass:"img-wrap"},[s("img",{staticClass:"img-responsive center-block",attrs:{src:t.shopInfo.avatar?t.$img(t.shopInfo.avatar):t.$img(t.defaultShopImage),alt:t.shopInfo.site_name},on:{error:function(e){t.shopInfo.avatar=t.defaultShopImage}}})]),s("h5",[s("span",{staticClass:"ns-text-color"},[t._v(t._s(t.shopInfo.site_name))]),1==t.shopInfo.is_own?s("el-tag",{staticClass:"tag",attrs:{size:"small"}},[t._v("自营")]):t._e()],1)]),s("div",{staticClass:"info-wrap"},[s("div",{staticClass:"item"},[t._v(" 描述相符 "),s("b",[t._v(t._s(t.shopInfo.shop_desccredit))]),t._v("分 ")]),s("div",{staticClass:"item"},[t._v(" 服务态度 "),s("b",[t._v(t._s(t.shopInfo.shop_servicecredit))]),t._v("分 ")]),s("div",{staticClass:"item"},[t._v(" 发货速度 "),s("b",[t._v(t._s(t.shopInfo.shop_deliverycredit))]),t._v("分 ")])]),s("div",{staticClass:"other-info"},[t.shopInfo.telephone?s("div",{staticClass:"tell"},[s("div",{staticClass:"tell-name"},[t._v("电话:")]),s("div",{staticClass:"tell-detail"},[t._v(t._s(t.shopInfo.telephone))])]):t._e(),t.shopInfo.full_address?s("div",{staticClass:"item-info"},[s("div",{staticClass:"item-name"},[t._v("地址:")]),s("div",{staticClass:"item-detail"},[t._v(t._s(t.shopInfo.full_address)+t._s(t.shopInfo.address))])]):t._e()]),s("div",{staticClass:"operation"},[t.hasFollow?s("el-button",{attrs:{size:"medium"},on:{click:t.getIsFollow}},[t._v("取消关注")]):s("el-button",{attrs:{size:"medium"},on:{click:t.getIsFollow}},[t._v("关注店铺")])],1)]),s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"搜索 商品",maxlength:"50",size:"medium",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getGoodsList},slot:"append"})],1),s("div",{staticClass:"shop-goods-cate",class:{border:t.categoryList.length}},t._l(t.categoryList,(function(e){return s("div",{key:e.category_id,staticClass:"item"},[s("div",{staticClass:"menu-name",on:{click:function(s){return t.tabCate(e)}}},[t._v(t._s(e.category_name))]),t._l(e.child_list,(function(e){return s("div",{key:e.category_id,class:t.filters.category_id==e.category_id?"active":"submenu",on:{click:function(s){return t.tabCate(e)}}},[t._v(t._s(e.category_name))])}))],2)})),0)],1),s("div",{staticClass:"shop-right"},[t.keyword?s("div",{staticClass:"search_bread"},[s("span",[t._v("搜索结果:")]),s("span",{staticClass:"keyword"},[t._v("'"+t._s(t.keyword)+"'")])]):t._e(),s("div",[s("div",{staticClass:"sort"},[s("div",{staticClass:"item",on:{click:function(e){return t.changeSort("")}}},[s("div",{staticClass:"item-name"},[t._v("综合")])]),s("div",{staticClass:"item",on:{click:function(e){return t.changeSort("sale_num")}}},[s("div",{staticClass:"item-name"},[t._v("销量")]),"sale_num"===t.filters.order&&"desc"===t.filters.sort?s("i",{staticClass:"el-icon-arrow-down el-icon--down"}):s("i",{staticClass:"el-icon-arrow-up el-icon--up"})]),s("div",{staticClass:"item",on:{click:function(e){return t.changeSort("discount_price")}}},[s("div",{staticClass:"item-name"},[t._v("价格")]),"discount_price"===t.filters.order&&"desc"===t.filters.sort?s("i",{staticClass:"el-icon-arrow-down el-icon--down"}):s("i",{staticClass:"el-icon-arrow-up el-icon--up"})]),s("div",{staticClass:"item-other"},[s("el-checkbox",{attrs:{label:"包邮"},model:{value:t.is_free_shipping,callback:function(e){t.is_free_shipping=e},expression:"is_free_shipping"}})],1),s("div",{staticClass:"input-wrap"},[s("div",{staticClass:"price_range"},[s("el-input",{attrs:{placeholder:"最低价格",size:"small"},model:{value:t.filters.min_price,callback:function(e){t.$set(t.filters,"min_price",e)},expression:"filters.min_price"}}),s("span",[t._v("—")]),s("el-input",{attrs:{placeholder:"最高价格",size:"small"},model:{value:t.filters.max_price,callback:function(e){t.$set(t.filters,"max_price",e)},expression:"filters.max_price"}})],1),s("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.handlePriceRange}},[t._v("确定")])],1)])]),s("div",[t.cateGoodsList.length?s("div",{staticClass:"goods-info"},t._l(t.cateGoodsList,(function(e,i){return s("div",{key:e.goods_id,staticClass:"item",on:{click:function(s){return t.$router.pushToTab({path:"/sku-"+e.sku_id})}}},[s("img",{staticClass:"img-wrap",attrs:{src:t.$img(e.sku_image,{size:"mid"})},on:{error:function(e){return t.imageError(i)}}}),s("div",{staticClass:"price-wrap"},[s("div",{staticClass:"price"},[s("p",[t._v("￥")]),t._v(" "+t._s(e.discount_price)+" ")]),s("div",{staticClass:"market-price"},[t._v("￥"+t._s(e.market_price))])]),s("div",{staticClass:"goods-name"},[t._v(t._s(e.goods_name))]),s("div",{staticClass:"sale-num"},[s("p",[t._v(t._s(e.sale_num||0))]),t._v("人付款 ")]),s("div",{staticClass:"saling"},[1==e.is_free_shipping?s("div",{staticClass:"free-shipping"},[t._v("包邮")]):t._e(),1==e.promotion_type?s("div",{staticClass:"promotion-type"},[t._v("限时折扣")]):t._e()])])})),0):s("div",{staticClass:"empty"},[s("div",{staticClass:"ns-text-align"},[t._v("没有找到您想要的商品。换个条件试试吧")])])]),s("div",{staticClass:"pager"},[s("el-pagination",{attrs:{background:"","pager-count":5,total:t.total,"prev-text":"上一页","next-text":"下一页","current-page":t.currentPage,"page-size":t.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handlePageSizeChange,"current-change":t.handleCurrentPageChange}})],1)])])])},a=[],o=(s("4160"),s("c975"),s("a434"),s("d3b7"),s("ac1f"),s("25f0"),s("1276"),s("159b"),s("5530")),n=s("8dd4"),r=s("a2a9"),c=s("2f62"),l={data:function(){return{cateGoodsList:[],total:0,keyword:"",currentPage:1,pageSize:12,is_free_shipping:0,is_own:"",filters:{site_id:0,category_id:0,min_price:"",max_price:"",order:"",sort:"desc",category_level:""},shopInfo:{},hasFollow:!1,categoryList:[],loading:!0}},created:function(){this.filters.coupon_type=this.$route.query.coupon_type||0,this.filters.platform_coupon_type=this.$route.query.platform_coupon_type||0,this.keyword=this.$route.query.keyword||"",this.filters.shop_category_id=this.$route.query.shop_category_id,this.filters.category_level=this.$route.query.category_level,this.$route.query.site_id?(this.filters.site_id=this.$route.query.site_id,this.getGoodsList(),this.getShopInfo(),this.getCategoryList(),this.getfollow()):(this.$message.error("缺少店铺id"),this.$router.push("/index"))},watch:{is_free_shipping:function(t){this.filters.is_free_shipping=t?1:"",this.getGoodsList()},$route:function(t){t.fullPath&&(this.filters.site_id=t.query.site_id,this.filters.shop_category_id=t.query.shop_category_id,this.filters.category_level=t.query.category_level,this.getGoodsList()),this.keyword!==t.query.keyword&&(this.currentPage=1,this.keyword=t.query.keyword,this.filters.shop_category_id=t.query.category_id||"",this.getGoodsList())}},computed:Object(o["a"])({},Object(c["b"])(["token","defaultShopImage","addonIsExit","defaultGoodsImage"])),methods:{tabCate:function(t){this.$router.push({path:"/shop_list",query:{site_id:this.filters.site_id,shop_category_id:t.category_id,category_level:t.level}}),this.filters.shop_category_id=t.category_id,this.filters.category_level=t.level,this.getGoodsList()},getShopInfo:function(){var t=this;Object(n["c"])({site_id:this.filters.site_id}).then((function(e){0==e.code&&(t.shopInfo=e.data)})).catch((function(e){t.$message.error(e.message)}))},getfollow:function(){var t=this;Object(n["b"])({site_id:this.filters.site_id}).then((function(e){t.hasFollow=e.data})).catch((function(t){}))},getCategoryList:function(){var t=this;Object(n["d"])({site_id:this.filters.site_id}).then((function(e){t.categoryList=e.data})).catch((function(e){t.$message.error(e.message)}))},getIsFollow:function(){var t=this;this.hasFollow?Object(n["e"])({site_id:this.filters.site_id}).then((function(e){0==e.code&&e.data&&(t.hasFollow=!t.hasFollow,t.$message({message:"取消关注成功",type:"success"}))})):Object(n["a"])({site_id:this.filters.site_id}).then((function(e){0==e.code&&e.data&&(t.hasFollow=!t.hasFollow,t.$message({message:"关注成功",type:"success"}))}))},getGoodsList:function(){var t=this,e=Object(o["a"])({page:this.currentPage,page_size:this.pageSize,site_id:this.filters.site_id,keyword:this.keyword,category_level:this.filters.category_level},this.filters);Object(r["h"])(e||{}).then((function(e){var s=e.data,i=s.count,a=(s.page_count,s.list);t.total=i,t.cateGoodsList=a,t.loading=!1})).catch((function(e){t.loading=!1}))},onChooseBrand:function(t){this.choosedBrand=t,this.filters.brand_id=t.id,this.getGoodsList()},setMuiltChoose:function(t){this.$set(t,"isMuiltSelect",!t.isMuiltSelect),this.getGoodsList()},setAttrSelected:function(t,e){var s=this;t.child&&t.child.forEach((function(t){s.$set(t,"selected",!1)})),this.$set(e,"selected",!0),this.$set(t,"selectedValue",e.attr_value_name),this.getGoodsList()},setAttrSelectedMuilt:function(t,e){this.$set(e,"selected",!e.selected);var s=[];if(e.selected){var i=t.selectedValue||"";s=i.split(","),""==s[0]&&s.pop(0),-1==s.indexOf(e.attr_value_name)&&s.push(e.attr_value_name)}else{var a=t.selectedValue||"";s=a.split(","),""==s[0]&&s.pop(0),-1!==s.indexOf(e.attr_value_name)&&s.splice(s.indexOf(e.attr_value_name),1)}this.$set(t,"selectedValue",s.toString()),this.getGoodsList()},colseBrand:function(){this.choosedBrand="",this.filters.brand_id="",this.getGoodsList()},colseAttr:function(t){var e=this;t.selectedValue="",t.child.forEach((function(t){e.$set(t,"selected",!1)})),this.getGoodsList()},handlePageSizeChange:function(t){this.pageSize=t,this.getGoodsList()},handleCurrentPageChange:function(t){this.currentPage=t,this.getGoodsList()},handlePriceRange:function(){this.getGoodsList()},handleChangeInitial:function(t){this.currentInitial=t},changeSort:function(t){this.filters.order===t?this.$set(this.filters,"sort","desc"===this.filters.sort?"asc":"desc"):(this.$set(this.filters,"order",t),this.$set(this.filters,"sort","desc")),this.getGoodsList()},imageError:function(t){this.cateGoodsList[t].sku_image=this.defaultGoodsImage}}},d={name:"shop_list",mixins:[l]},u=d,h=(s("65a6"),s("2877")),_=Object(h["a"])(u,i,a,!1,null,"51381d1d",null);e["default"]=_.exports},"3c48":function(t,e,s){},"65a6":function(t,e,s){"use strict";var i=s("3c48"),a=s.n(i);a.a},a2a9:function(t,e,s){"use strict";s.d(e,"h",(function(){return a})),s.d(e,"f",(function(){return o})),s.d(e,"g",(function(){return n})),s.d(e,"d",(function(){return r})),s.d(e,"i",(function(){return c})),s.d(e,"b",(function(){return l})),s.d(e,"j",(function(){return d})),s.d(e,"a",(function(){return u})),s.d(e,"e",(function(){return h})),s.d(e,"c",(function(){return _}));var i=s("751a");function a(t){return Object(i["a"])({url:"/api/goodssku/page",data:t})}function o(t){return Object(i["a"])({url:"/api/goodssku/detail",data:t})}function n(t){return Object(i["a"])({url:"/api/goodssku/info",data:t})}function r(t){return Object(i["a"])({url:"/api/goodssku/goodsqrcode",data:t})}function c(t){return Object(i["a"])({url:"/manjian/api/manjian/info",data:t})}function l(t){return Object(i["a"])({url:"/api/goods/aftersale",data:t})}function d(t){return Object(i["a"])({url:"/api/goods/modifyclicks",data:t})}function u(t){return Object(i["a"])({url:"/api/goodsbrowse/add",data:t})}function h(t){return Object(i["a"])({url:"/api/goodssku/recommend",data:t})}function _(t){return Object(i["a"])({url:"/api/goodsbrand/page",data:t})}}}]);
//# sourceMappingURL=chunk-3298de93.8876943d.js.map