(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c8c4ff8"],{"0bad8":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"shop-index"},[s("div",{staticClass:"shop-left"},[s("div",{staticClass:"shop-wrap"},[s("div",{staticClass:"head-wrap"},[s("div",{staticClass:"img-wrap"},[s("img",{staticClass:"img-responsive center-block",attrs:{src:t.shopInfo.avatar?t.$img(t.shopInfo.avatar):t.$img(t.defaultShopImage),alt:t.shopInfo.site_name},on:{error:function(e){t.shopInfo.avatar=t.defaultShopImage}}})]),s("h5",[s("span",{staticClass:"ns-text-color"},[t._v(t._s(t.shopInfo.site_name))]),1==t.shopInfo.is_own?s("el-tag",{staticClass:"tag",attrs:{size:"small"}},[t._v("自营")]):t._e()],1)]),s("div",{staticClass:"info-wrap"},[s("div",{staticClass:"item"},[t._v(" 描述相符 "),s("b",[t._v(t._s(t.shopInfo.shop_desccredit))]),t._v("分 ")]),s("div",{staticClass:"item"},[t._v(" 服务态度 "),s("b",[t._v(t._s(t.shopInfo.shop_servicecredit))]),t._v("分 ")]),s("div",{staticClass:"item"},[t._v(" 发货速度 "),s("b",[t._v(t._s(t.shopInfo.shop_deliverycredit))]),t._v("分 ")])]),s("div",{staticClass:"other-info"},[t.shopInfo.telephone?s("div",{staticClass:"tell"},[s("div",{staticClass:"tell-name"},[t._v("电话:")]),s("div",{staticClass:"tell-detail"},[t._v(t._s(t.shopInfo.telephone))])]):t._e(),t.shopInfo.full_address?s("div",{staticClass:"item-info"},[s("div",{staticClass:"item-name"},[t._v("地址:")]),s("div",{staticClass:"item-detail"},[t._v(t._s(t.shopInfo.full_address)+t._s(t.shopInfo.address))])]):t._e()]),s("div",{staticClass:"operation"},[t.hasFollow?s("el-button",{attrs:{size:"medium"},on:{click:t.getIsFollow}},[t._v("取消关注")]):s("el-button",{attrs:{size:"medium"},on:{click:t.getIsFollow}},[t._v("关注店铺")])],1)]),s("div",{staticClass:"shop-goods-search"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"搜索 商品",size:"medium",maxlength:"50",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.goGoodsList},slot:"append"})],1)],1),s("div",{staticClass:"shop-goods-cate",class:{border:t.categoryList.length}},t._l(t.categoryList,(function(e){return s("div",{key:e.category_id,staticClass:"item"},[s("div",{staticClass:"menu-name",on:{click:function(s){return t.$router.push({path:"/shop_list",query:{site_id:t.id,shop_category_id:e.category_id}})}}},[t._v(t._s(e.category_name))]),t._l(e.child_list,(function(a){return s("div",{key:a.category_id,staticClass:"submenu",on:{click:function(s){return t.$router.push({path:"/shop_list",query:{site_id:t.id,shop_category_id:e.category_id}})}}},[t._v(t._s(a.category_name))])}))],2)})),0)]),s("div",{staticClass:"shop-right"},[s("div",{staticClass:"content"},[s("div",{staticClass:"shop-banner"},[s("el-carousel",{attrs:{height:"406px"}},t._l(t.adList,(function(e){return s("el-carousel-item",{key:e.adv_id},[s("el-image",{attrs:{src:t.$img(e.adv_image),fit:"cover"},on:{click:function(s){return t.$router.pushToTab(e.adv_url.url)}}})],1)})),1)],1),t.goodsList.length?s("div",{staticClass:"tj"},[s("h5",[t._v("本店推荐")])]):t._e(),s("div",{staticClass:"goods-info"},t._l(t.goodsList,(function(e,a){return s("div",{key:e.goods_id,staticClass:"item",on:{click:function(s){return t.$router.pushToTab({path:"/sku-"+e.sku_id})}}},[s("img",{staticClass:"img-wrap",attrs:{src:t.$img(e.sku_image,{size:"mid"})},on:{error:function(e){return t.imageError(a)}}}),s("div",{staticClass:"goods-name"},[t._v(t._s(e.goods_name))]),s("div",{staticClass:"price-wrap"},[s("div",{staticClass:"price"},[s("p",[t._v("￥")]),t._v(" "+t._s(e.discount_price)+" ")]),s("div",{staticClass:"market-price"},[t._v("￥"+t._s(e.market_price))])]),1==e.promotion_type?s("div",{staticClass:"promotion_type"},[t._v("限时折扣")]):t._e()])})),0),s("div",{staticClass:"pager"},[s("el-pagination",{attrs:{background:"","pager-count":5,total:t.total,"prev-text":"上一页","next-text":"下一页","current-page":t.currentPage,"page-size":t.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handlePageSizeChange,"current-change":t.handleCurrentPageChange}})],1)])])])])},i=[],o=(s("ac1f"),s("5319"),s("5530")),n=s("8dd4"),r=s("a2a9"),c=s("2f62"),d=s("37cb"),u={name:"shop_index",components:{},data:function(){return{id:0,currentPage:1,pageSize:12,shopInfo:{},hasFollow:!1,searchContent:"",categoryList:[],goodsList:[],total:0,loading:!0,keyword:"",adList:[]}},computed:Object(o["a"])({},Object(c["b"])(["token","defaultShopImage","addonIsExit","defaultGoodsImage"])),created:function(){this.id=this.$route.path.replace("/shop-",""),this.getAdList(),this.getShopInfo(),this.getCategoryList(),this.getGoodsList(),this.getfollow()},watch:{$route:function(t){this.id=t.params.pathMatch,this.getAdList(),this.getShopInfo(),this.getCategoryList(),this.getGoodsList(),this.getfollow()}},methods:{getAdList:function(){var t=this;Object(d["a"])({keyword:"NS_PC_SHOP_INDEX"}).then((function(e){t.adList=e.data.adv_list;for(var s=0;s<t.adList.length;s++)t.adList[s].adv_url&&(t.adList[s].adv_url=JSON.parse(t.adList[s].adv_url))})).catch((function(t){return t}))},getShopInfo:function(){var t=this;Object(n["c"])({site_id:this.id}).then((function(e){0==e.code&&(t.shopInfo=e.data)})).catch((function(e){t.loading=!1,t.$message.error(e.message)}))},getCategoryList:function(){var t=this;Object(n["d"])({site_id:this.id}).then((function(e){t.categoryList=e.data})).catch((function(e){t.loading=!1,t.$message.error(e.message)}))},getGoodsList:function(){var t=this,e={page:this.currentPage,page_size:this.pageSize,site_id:this.id,keyword:this.keyword,sort:"desc"};Object(r["h"])(e||{}).then((function(e){if(0==e.code&&e.data){var s=e.data;t.goodsList=s.list,t.total=e.data.count,t.loading=!1}})).catch((function(e){t.loading=!1,t.$message.error(e.message)}))},getfollow:function(){var t=this;Object(n["b"])({site_id:this.id}).then((function(e){t.hasFollow=e.data})).catch((function(t){}))},getIsFollow:function(){var t=this;this.hasFollow?Object(n["e"])({site_id:this.id}).then((function(e){0==e.code&&e.data&&(t.hasFollow=!t.hasFollow,t.$message({message:"取消关注成功",type:"success"}))})):Object(n["a"])({site_id:this.id}).then((function(e){0==e.code&&e.data&&(t.hasFollow=!t.hasFollow,t.$message({message:"关注成功",type:"success"}))}))},goGoodsList:function(){this.$router.push({path:"/shop_list",query:{site_id:this.id,keyword:this.keyword}})},handlePageSizeChange:function(t){this.pageSize=t,this.getGoodsList()},handleCurrentPageChange:function(t){this.currentPage=t,this.getGoodsList()},imageError:function(t){this.goodsList[t].sku_image=this.defaultGoodsImage}}},l=u,h=(s("7b45"),s("2877")),g=Object(h["a"])(l,a,i,!1,null,"749a3c4a",null);e["default"]=g.exports},"7b45":function(t,e,s){"use strict";var a=s("7e42"),i=s.n(a);i.a},"7e42":function(t,e,s){},a2a9:function(t,e,s){"use strict";s.d(e,"h",(function(){return i})),s.d(e,"f",(function(){return o})),s.d(e,"g",(function(){return n})),s.d(e,"d",(function(){return r})),s.d(e,"i",(function(){return c})),s.d(e,"b",(function(){return d})),s.d(e,"j",(function(){return u})),s.d(e,"a",(function(){return l})),s.d(e,"e",(function(){return h})),s.d(e,"c",(function(){return g}));var a=s("751a");function i(t){return Object(a["a"])({url:"/api/goodssku/page",data:t})}function o(t){return Object(a["a"])({url:"/api/goodssku/detail",data:t})}function n(t){return Object(a["a"])({url:"/api/goodssku/info",data:t})}function r(t){return Object(a["a"])({url:"/api/goodssku/goodsqrcode",data:t})}function c(t){return Object(a["a"])({url:"/manjian/api/manjian/info",data:t})}function d(t){return Object(a["a"])({url:"/api/goods/aftersale",data:t})}function u(t){return Object(a["a"])({url:"/api/goods/modifyclicks",data:t})}function l(t){return Object(a["a"])({url:"/api/goodsbrowse/add",data:t})}function h(t){return Object(a["a"])({url:"/api/goodssku/recommend",data:t})}function g(t){return Object(a["a"])({url:"/api/goodsbrand/page",data:t})}}}]);
//# sourceMappingURL=chunk-9c8c4ff8.d875458f.js.map