(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52e4520f"],{"585e":function(e,t,a){},"5d97":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-row-wrap find-pass"},[a("ul",[e._m(0),a("li",{attrs:{id:"current2"}},[a("span",{staticClass:"line-1",class:e.step>=2?"ns-border-color":"ns-border-color-gray"}),a("div",[a("p",{class:e.step>=2?"ns-bg-color":"ns-bg-color-gray"},[e._v("2")]),a("p",{class:e.step>=2?"ns-text-color":"ns-text-color-gray"},[e._v("验证身份")])]),a("span",{staticClass:"line-2",class:e.step>=2?"ns-border-color":"ns-border-color-gray"})]),a("li",{attrs:{id:"current3"}},[a("span",{staticClass:"line-1",class:e.step>=3?"ns-border-color":"ns-border-color-gray"}),a("div",[a("p",{class:e.step>=3?"ns-bg-color":"ns-bg-color-gray"},[e._v("3")]),a("p",{class:e.step>=3?"ns-text-color":"ns-text-color-gray"},[e._v("重置密码")])]),a("span",{staticClass:"line-2",class:e.step>=3?"ns-border-color":"ns-border-color-gray"})]),a("li",{attrs:{id:"current4"}},[a("span",{staticClass:"line-1",class:e.step>=4?"ns-border-color":"ns-border-color-gray"}),a("div",[a("p",{class:e.step>=4?"ns-bg-color":"ns-bg-color-gray"},[e._v("4")]),a("p",{class:e.step>=4?"ns-text-color":"ns-text-color-gray"},[e._v("完成")])])])]),a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form",{ref:"ruleForm",staticClass:"ns-forget-pass-form",attrs:{model:e.formData,rules:e.rules}},[a("div",{staticClass:"ns-forget-pass"},[1==e.step?[a("el-form-item",{key:"1",attrs:{prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入注册手机号"},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"el-icon-mobile-phone"})])],2)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.nextStep("ruleForm")}}},[e._v("下一步")])],1)]:2==e.step?[a("el-form-item",{key:"2",attrs:{prop:"vercode"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入验证码",maxlength:"4"},model:{value:e.formData.vercode,callback:function(t){e.$set(e.formData,"vercode",t)},expression:"formData.vercode"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"el-icon-picture-outline"})]),a("template",{slot:"append"},[a("img",{staticClass:"captcha",attrs:{src:e.captcha.img,mode:""},on:{click:e.getCaptcha}})])],2)],1),a("el-form-item",{key:"3",attrs:{prop:"dynacode"}},[a("el-input",{attrs:{maxlength:"4",autocomplete:"off",placeholder:"请输入短信动态码"},model:{value:e.formData.dynacode,callback:function(t){e.$set(e.formData,"dynacode",t)},expression:"formData.dynacode"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"el-icon-mobile"})]),a("template",{slot:"append"},[a("div",{staticClass:"dynacode",class:120==e.dynacodeData.seconds?"ns-text-color":"ns-text-color-gray",on:{click:function(t){return e.sendMobileCode("ruleForm")}}},[e._v(" "+e._s(e.dynacodeData.codeText)+" ")])])],2)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.nextStepToSetPass("ruleForm")}}},[e._v("下一步")])],1)]:3==e.step?[a("el-form-item",{key:"4",attrs:{prop:"pass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入新的登录密码"},model:{value:e.formData.pass,callback:function(t){e.$set(e.formData,"pass","string"===typeof t?t.trim():t)},expression:"formData.pass"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"el-icon-lock"})])],2)],1),a("el-form-item",{key:"5",attrs:{prop:"repass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请再次输入新密码"},model:{value:e.formData.repass,callback:function(t){e.$set(e.formData,"repass","string"===typeof t?t.trim():t)},expression:"formData.repass"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"el-icon-lock"})])],2)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.resetPass("ruleForm")}}},[e._v("重置密码")])],1)]:4==e.step?[a("span",{staticClass:"ns-reset-success"},[e._v("重置密码成功")]),a("el-form-item",[a("router-link",{attrs:{to:"/login"}},[a("el-button",{attrs:{type:"primary"}},[e._v("重新登录")])],1)],1)]:e._e()],2)])],1)])],1)],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("div",[a("p",{staticClass:"ns-bg-color"},[e._v("1")]),a("p",{staticClass:"ns-text-color"},[e._v("输入手机号")])]),a("span",{staticClass:"line-2 ns-border-color"})])}],o=(a("c975"),a("ac1f"),a("5319"),a("7401")),n=a("37cb"),c={data:function(){var e=function(e,t,a){if(!t)return a(new Error("手机号不能为空"));var s=/^1[3|4|5|6|7|8|9][0-9]{9}$/;s.test(t)?a():a(new Error("请输入正确的手机号"))},t=this,a=function(e,a,s){var r=t.registerConfig;if(!a)return s(new Error("请输入新的登录密码"));if(r.pwd_len>0){if(a.length<r.pwd_len)return s(new Error("密码长度不能小于"+r.pwd_len+"位"));s()}else if(""!=r.pwd_complexity){var o="密码需包含",n="";if(-1!=r.pwd_complexity.indexOf("number")?(n+="(?=.*?[0-9])",o+="数字"):-1!=r.pwd_complexity.indexOf("letter")?(n+="(?=.*?[a-z])",o+="、小写字母"):-1!=r.pwd_complexity.indexOf("upper_case")?(n+="(?=.*?[A-Z])",o+="、大写字母"):-1!=r.pwd_complexity.indexOf("symbol")?(n+="(?=.*?[#?!@$%^&*-])",o+="、特殊字符"):(n+="",o+=""),n.test(a))return s(new Error(o));s()}},s=function(e,a,s){if(!a)return s(new Error("请输入确认密码"));a!==t.formData.pass?s(new Error("两次密码输入不一致")):s()};return{formData:{mobile:"",vercode:"",dynacode:"",pass:"",repass:"",key:""},step:1,activeName:"first",isShowPhone:"",captcha:{id:"",img:""},dynacodeData:{seconds:120,timer:null,codeText:"获取动态码",isSend:!1},registerConfig:{},rules:{mobile:[{required:!0,validator:e,trigger:"blur"}],vercode:[{required:!0,message:"请输入验证码",trigger:"blur"}],dynacode:[{required:!0,message:"请输入短信动态码",trigger:"blur"}],pass:[{required:!0,validator:a,trigger:"blur"}],repass:[{required:!0,validator:s,trigger:"blur"}]}}},created:function(){this.getCaptcha(),this.getRegisterConfig()},watch:{"dynacodeData.seconds":{handler:function(e,t){0==e&&(clearInterval(this.dynacodeData.timer),this.dynacodeData={seconds:120,timer:null,codeText:"获取动态码",isSend:!1})},immediate:!0,deep:!0}},methods:{nextStep:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(o["d"])({mobile:t.formData.mobile}).then((function(e){-1==e.code?t.step=2:t.$message({message:e.message,type:"warning"})})).catch((function(e){0==e.code?t.$message({message:"该手机号未注册",type:"warning"}):t.$message.error(e.message)}))}))},nextStepToSetPass:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.step=3}))},resetPass:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(o["e"])({password:t.formData.pass,code:t.formData.dynacode,key:t.formData.key,mobile:t.formData.mobile}).then((function(e){e.code>=0&&(t.step=4,t.$message({message:e.message,type:"success"}))})).catch((function(e){t.$message.error(e.message)}))}))},getCaptcha:function(){var e=this;Object(n["b"])({captcha_id:this.captcha.id}).then((function(t){t.code>=0&&(e.captcha.id=t.data.id,e.captcha.img=t.data.img,e.captcha.img=e.captcha.img.replace(/\r\n/g,""))})).catch((function(t){e.$message.error(t.message)}))},sendMobileCode:function(e){var t=this;120==this.dynacodeData.seconds&&(this.$refs[e].clearValidate("dynacode"),this.$refs[e].validateField("vercode",(function(e){if(e)return!1;t.isSend||(t.isSend=!0,Object(o["g"])({captcha_id:t.captcha.id,captcha_code:t.formData.vercode,mobile:t.formData.mobile}).then((function(e){e.code>=0&&(t.formData.key=e.data.key,120==t.dynacodeData.seconds&&null==t.dynacodeData.timer?t.dynacodeData.timer=setInterval((function(){t.dynacodeData.seconds--,t.dynacodeData.codeText=t.dynacodeData.seconds+"s后可重新获取"}),1e3):(t.$message({message:e.message,type:"warning"}),t.isSend=!1,t.getCaptcha()))})).catch((function(e){t.isSend=!1,t.getCaptcha(),t.$message.error(e.message)})))})))},getRegisterConfig:function(){var e=this;Object(o["f"])().then((function(t){t.code>=0&&(e.registerConfig=t.data.value)})).catch((function(e){console.log(e.message)}))}}},i={name:"find_pass",mixins:[c]},l=i,d=(a("fe83"),a("d114"),a("2877")),p=Object(d["a"])(l,s,r,!1,null,"4fa7fb28",null);t["default"]=p.exports},"5dc1":function(e,t,a){},d114:function(e,t,a){"use strict";var s=a("585e"),r=a.n(s);r.a},fe83:function(e,t,a){"use strict";var s=a("5dc1"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-52e4520f.619a2779.js.map