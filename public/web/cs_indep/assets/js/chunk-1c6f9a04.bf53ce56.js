(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c6f9a04"],{"0317":function(t,e,i){},"08f9":function(t,e,i){"use strict";i.d(e,"e",(function(){return n})),i.d(e,"a",(function(){return a})),i.d(e,"d",(function(){return r})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return c})),i.d(e,"f",(function(){return l}));var s=i("751a");function n(t){return Object(s["a"])({url:"/seckill/api/ordercreate/payment",data:t,forceLogin:!0})}function a(t){return Object(s["a"])({url:"/seckill/api/ordercreate/calculate",data:t,forceLogin:!0})}function r(t){return Object(s["a"])({url:"/seckill/api/ordercreate/create",data:t,forceLogin:!0})}function o(t){return Object(s["a"])({url:"/seckill/api/seckillgoods/page",data:t})}function c(t){return Object(s["a"])({url:"/seckill/api/seckillgoods/detail",data:t})}function l(t){return Object(s["a"])({url:"/seckill/api/seckill/lists",data:t})}},"0dec":function(t,e,i){t.exports=i("f292")},"12f2a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ns-seckill"},[t.timeList.length>0?i("div",{staticClass:"ns-seckill-time-wrap"},[i("div",{staticClass:"ns-seckill-time-box"},[i("span",{staticClass:"left-btn iconfont iconarrow-left-copy",on:{click:function(e){return t.changeThumbImg("prev")}}}),i("span",{staticClass:"right-btn iconfont iconarrow-right",on:{click:function(e){return t.changeThumbImg("next")}}}),i("div",{ref:"seckillTime",staticClass:"ns-seckill-time-list"},[i("ul",{staticClass:"seckill-time-ul",style:{left:t.thumbPosition+"px"}},t._l(t.timeList,(function(e,s){return i("li",{key:s,staticClass:"seckill-time-li",on:{click:function(e){return t.handleSelected(s)}}},[i("div",{staticClass:"tab-li",class:{"selected-tab":t.seckillId==e.seckill_id},attrs:{slot:"label"},slot:"label"},[i("div",[t._v(t._s(e.name))]),i("div",[s>t.index?i("p",[t._v("敬请期待")]):t._e(),s!=t.index||e.isNow?t._e():i("p",[t._v("即将开始")]),s==t.index&&e.isNow?i("p",[t._v("抢购中")]):t._e(),s<t.index?i("p",[t._v("已结束")]):t._e()])])])})),0)])])]):t._e(),i("el-carousel",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingAd,expression:"loadingAd"}],attrs:{height:"400px"}},t._l(t.adList,(function(e){return i("el-carousel-item",{key:e.adv_id},[i("el-image",{attrs:{src:t.$img(e.adv_image),fit:"cover"},on:{click:function(i){return t.$router.pushToTab(e.adv_url.url)}}})],1)})),1),t.timeList.length>0&&t.goodsList.length>0?i("div",{ref:"seckillGoods",staticClass:"ns-seckill-box"},[i("div",{staticClass:"ns-seckill-title"},[i("div",[i("i",{staticClass:"iconfont iconmiaosha1"}),i("span",[t._v(t._s(t.seckillName))])]),t.seckillIndex==t.index&&t.isTrue?i("div",{staticClass:"ns-seckill-end"},[t._v(" "+t._s(t.seckillText)+" "),i("count-down",{staticClass:"count-down",attrs:{currentTime:t.seckillTimeMachine.currentTime,startTime:t.seckillTimeMachine.startTime,endTime:t.seckillTimeMachine.endTime,dayTxt:"：",hourTxt:"：",minutesTxt:"：",secondsTxt:""},on:{start_callback:function(e){return t.countDownS_cb()},end_callback:function(e){return t.countDownE_cb()}}})],1):t._e()]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{staticClass:"goods-list"},t._l(t.goodsList,(function(e,s){return i("div",{key:s,staticClass:"item"},[i("div",{staticClass:"goods"},[t.seckillIndex==t.index&&t.timeList[t.index].isNow?i("div",{staticClass:"img",on:{click:function(i){return t.toGoodsDetail(e.id)}}},[i("el-image",{attrs:{fit:"scale-down",src:t.$img(e.sku_image,{size:"mid"}),lazy:""},on:{error:function(e){return t.imageError(t.index)}}})],1):i("div",{staticClass:"img"},[i("el-image",{attrs:{fit:"scale-down",src:t.$img(e.sku_image,{size:"mid"}),lazy:""},on:{error:function(e){return t.imageError(t.index)}}})],1),i("div",{staticClass:"name"},[i("p",{attrs:{title:e.sku_name}},[t._v(t._s(e.sku_name))])]),i("div",{staticClass:"price"},[i("div",[i("p",[i("span",[t._v("秒杀价")]),i("span",[t._v("￥")]),i("span",{staticClass:"main_price"},[t._v(t._s(e.seckill_price))])]),i("span",{staticClass:"primary_price"},[t._v("￥"+t._s(e.price))])])]),t.seckillIndex==t.index&&t.timeList[t.index].isNow?i("el-button",{on:{click:function(i){return t.toGoodsDetail(e.id)}}},[t._v("立即抢购")]):t._e()],1)])})),0)]),i("div",{staticClass:"pager"},[i("el-pagination",{attrs:{background:"","pager-count":5,total:t.total,"prev-text":"上一页","next-text":"下一页","current-page":t.currentPage,"page-size":t.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handlePageSizeChange,"current-change":t.handleCurrentPageChange}})],1)]):t._e(),t.timeList.length<=0||t.goodsList.length<=0?i("div",{staticClass:"empty-wrap"},[i("div",{staticClass:"ns-text-align"},[t._v("暂无正在进行秒杀的商品，去首页看看吧")])]):t._e()],1)},n=[],a=(i("4160"),i("c975"),i("b0c0"),i("159b"),i("5530")),r=i("08f9"),o=i("2f62"),c=i("37cb"),l=i("0dec"),u=i.n(l),d={name:"groupbuy",components:{CountDown:u.a},data:function(){return{loading:!0,timeList:[],seckillId:null,seckillName:null,seckillIndex:null,goodsList:[],index:null,siteId:0,total:0,currentPage:1,pageSize:10,loadingAd:!0,adList:[],seckillTimeMachine:{currentTime:0,startTime:0,endTime:0},seckillText:"距离结束仅剩",thumbPosition:0,moveThumbLeft:!1,moveThumbRight:!1}},watch:{seckillId:function(t,e){t&&t!=e&&this.refresh()},addonIsExit:function(){var t=this;1!=this.addonIsExit.seckill&&this.$message({message:"秒杀插件未安装",type:"warning",duration:2e3,onClose:function(){t.$route.push("/")}})}},created:function(){var t=this;this.addonIsExit&&1!=this.addonIsExit.seckill?this.$message({message:"秒杀插件未安装",type:"warning",duration:2e3,onClose:function(){t.$route.push("/")}}):(this.getAdList(),this.getTimeList())},computed:Object(a["a"])({isTrue:function(){var t=0;return this.timeList&&this.timeList[this.index]&&(t=this.timeList[this.index].isNow),t}},Object(o["b"])(["defaultGoodsImage","addonIsExit"])),methods:{handleSelected:function(t){var e=this.timeList[t].name;t<this.index?this.$message.warning(e+"秒杀已结束"):t>this.index&&this.$message.warning(e+"秒杀未开始")},changeThumbImg:function(t){var e=this.$refs.seckillTime.clientWidth,i=document.querySelector(".seckill-time-ul").style.left.indexOf("px");document.querySelector(".seckill-time-ul").style.left.substring(0,i);if(!(this.timeList.length<7)){var s=this.timeList.length%7,n=150;if(0==s)s=this.timeList.length-7;else if(0!=s&&1!=s&&s<2)return;if("prev"==t)0!=this.thumbPosition&&Math.round(this.thumbPosition,2)!=n&&n<Math.abs(this.thumbPosition)?this.thumbPosition+=n:this.thumbPosition=0;else if("next"==t&&Math.round(this.thumbPosition,2)!=-Math.round(n*s,2)){var a=this.timeList.length*n,r=a-e;Math.abs(this.thumbPosition)-r>=0?this.thumbPosition=-r:Math.abs(this.thumbPosition)-r<-150?this.thumbPosition-=n:this.thumbPosition=-r}}},countDownS_cb:function(){},countDownE_cb:function(){this.seckillText="活动已结束"},getAdList:function(){var t=this;Object(c["a"])({keyword:"NS_PC_SECKILL"}).then((function(e){t.adList=e.data.adv_list;for(var i=0;i<t.adList.length;i++)t.adList[i].adv_url&&(t.adList[i].adv_url=JSON.parse(t.adList[i].adv_url));t.loadingAd=!1})).catch((function(e){t.loadingAd=!1}))},getTimeList:function(){var t=this;Object(r["f"])().then((function(e){var i=e.data;if(i){var s=new Date(1e3*e.timestamp),n=60*s.getHours()*60+60*s.getMinutes()+s.getSeconds();if(i.list.forEach((function(i,a){if(i.seckill_start_time<=n&&n<i.seckill_end_time){i.isNow=!0,t.seckillId=i.seckill_id,t.seckillName=i.name,t.index=a,t.seckillIndex=a;var r=parseInt(s.getTime()/1e3)+(i.seckill_end_time-n);t.seckillTimeMachine={currentTime:e.timestamp,startTime:e.timestamp,endTime:r}}else i.isNow=!1})),t.timeList=i.list,!t.seckillId)for(var a=0;a<i.list.length;a++)(n<i.list[a].seckill_start_time&&0==a||n<i.list[a].seckill_start_time&&n>i.list[a-1].seckill_end_time&&0!=a||a==i.list.length-1&&n>i.list[a].seckill_end_time)&&(t.seckillId=i.list[a].seckill_id,t.index=a,t.seckillIndex=a);t.$nextTick((function(){if(this.timeList.length>0){this.$refs.seckillTime.clientWidth;var t=document.querySelector(".seckill-time-li").clientWidth,e=this.index*t,i=e-4*t;this.thumbPosition=-i}}))}})).catch((function(e){t.$message.error(e.message)}))},getGoodsList:function(){var t=this;Object(r["b"])({page_size:this.pageSize,page:this.currentPage,seckill_id:this.seckillId,site_id:this.siteId}).then((function(e){t.goodsList=e.data.list,t.total=e.data.count,t.loading=!1})).catch((function(e){t.loading=!1,t.$message.error(e.message)}))},toGoodsDetail:function(t){this.$router.pushToTab("/promotion/seckill-"+t)},handlePageSizeChange:function(t){this.pageSize=t,this.refresh()},handleCurrentPageChange:function(t){this.currentPage=t,this.refresh()},refresh:function(){this.loading=!0,this.getGoodsList()},imageError:function(t){this.goodsList[t].sku_image=this.defaultGoodsImage}}},h={name:"seckill",components:{},mixins:[d]},m=h,f=(i("f3ed"),i("8584"),i("2877")),g=Object(f["a"])(m,s,n,!1,null,"26b1bafa",null);e["default"]=g.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,i){var s=i("1d80"),n=i("5899"),a="["+n+"]",r=RegExp("^"+a+a+"*"),o=RegExp(a+a+"*$"),c=function(t){return function(e){var i=String(s(e));return 1&t&&(i=i.replace(r,"")),2&t&&(i=i.replace(o,"")),i}};t.exports={start:c(1),end:c(2),trim:c(3)}},"67e9":function(t,e,i){},8584:function(t,e,i){"use strict";var s=i("0317"),n=i.n(s);n.a},a9e3:function(t,e,i){"use strict";var s=i("83ab"),n=i("da84"),a=i("94ca"),r=i("6eeb"),o=i("5135"),c=i("c6b6"),l=i("7156"),u=i("c04e"),d=i("d039"),h=i("7c73"),m=i("241c").f,f=i("06cf").f,g=i("9bf2").f,p=i("58a8").trim,_="Number",v=n[_],T=v.prototype,k=c(h(T))==_,b=function(t){var e,i,s,n,a,r,o,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=p(l),e=l.charCodeAt(0),43===e||45===e){if(i=l.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:s=2,n=49;break;case 79:case 111:s=8,n=55;break;default:return+l}for(a=l.slice(2),r=a.length,o=0;o<r;o++)if(c=a.charCodeAt(o),c<48||c>n)return NaN;return parseInt(a,s)}return+l};if(a(_,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,w=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof w&&(k?d((function(){T.valueOf.call(i)})):c(i)!=_)?l(new v(b(e)),i,w):b(e)},I=s?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),L=0;I.length>L;L++)o(v,x=I[L])&&!o(w,x)&&g(w,x,f(v,x));w.prototype=T,T.constructor=w,r(n,_,w)}},f292:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.msTime.show?i("p",[t.msTime.day>0?i("span",[i("span",[t._v(t._s(t.msTime.day))]),i("i",[t._v(t._s(t.dayTxt))])]):t._e(),i("span",[t._v(t._s(t.msTime.hour))]),i("i",[t._v(t._s(t.hourTxt))]),i("span",[t._v(t._s(t.msTime.minutes))]),i("i",[t._v(t._s(t.minutesTxt))]),i("span",[t._v(t._s(t.msTime.seconds))]),i("i",[t._v(t._s(t.secondsTxt))])]):t._e()])},n=[],a=(i("a9e3"),i("b680"),i("d3b7"),i("25f0"),{replace:!0,data:function(){return{tipShow:!0,msTime:{show:!1,day:"",hour:"",minutes:"",seconds:""},star:"",end:"",current:""}},watch:{currentTime:function(t,e){this.gogogo()}},props:{tipText:{type:String,default:"距离开始"},tipTextEnd:{type:String,default:"距离结束"},id:{type:String,default:"1"},currentTime:{type:Number},startTime:{type:Number},endTime:{type:Number},endText:{type:String,default:"已结束"},dayTxt:{type:String,default:":"},hourTxt:{type:String,default:":"},minutesTxt:{type:String,default:":"},secondsTxt:{type:String,default:":"},secondsFixed:{type:Boolean,default:!1}},mounted:function(){console.log(this),this.gogogo()},methods:{gogogo:function(){var t=this;10==this.startTime.toString().length?this.star=1e3*this.startTime:this.star=this.startTime,10==this.endTime.toString().length?this.end=1e3*this.endTime:this.end=this.endTime,this.currentTime?10==this.currentTime.toString().length?this.current=1e3*this.currentTime:this.current=this.currentTime:this.current=(new Date).getTime(),this.end<this.current?(this.msTime.show=!1,this.end_message()):this.current<this.star?(this.$set(this,"tipShow",!0),setTimeout((function(){t.runTime(t.star,t.current,t.start_message)}),1)):(this.end>this.current&&this.star<this.current||this.star==this.current)&&(this.$set(this,"tipShow",!1),this.msTime.show=!0,this.$emit("start_callback",this.msTime.show),setTimeout((function(){t.runTime(t.end,t.star,t.end_message,!0)}),1))},runTime:function(t,e,i,s){var n=this,a=this.msTime,r=t-e;if(r>0){this.msTime.show=!0,a.day=Math.floor(r/864e5),r-=864e5*a.day,a.hour=Math.floor(r/36e5),r-=36e5*a.hour,a.minutes=Math.floor(r/6e4),r-=6e4*a.minutes,a.seconds=Math.floor(r/1e3).toFixed(0),r-=1e3*a.seconds,a.hour<10&&(a.hour="0"+a.hour),a.minutes<10&&(a.minutes="0"+a.minutes),a.seconds<10&&(a.seconds="0"+a.seconds);var o=Date.now(),c=Date.now(),l=c-o;setTimeout((function(){s?n.runTime(n.end,e+=1e3,i,!0):n.runTime(n.star,e+=1e3,i)}),1e3-l)}else i()},start_message:function(){var t=this;this.$set(this,"tipShow",!1),this.$emit("start_callback",this.msTime.show),setTimeout((function(){t.runTime(t.end,t.star,t.end_message,!0)}),1)},end_message:function(){this.msTime.show=!1,this.currentTime<=0||this.$emit("end_callback",this.msTime.show)}}}),r=a,o=i("2877"),c=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=c.exports},f3ed:function(t,e,i){"use strict";var s=i("67e9"),n=i.n(s);n.a}}]);
//# sourceMappingURL=chunk-1c6f9a04.bf53ce56.js.map