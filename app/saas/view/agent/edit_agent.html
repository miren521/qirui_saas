
<!DOCTYPE html>

<html>

<head>

    <meta name="renderer" content="webkit" />

    <meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1" />

    <title>{$menu_info['title']|default=""} - {$website['title']|default="Niushop开源商城"}</title>

    <meta name="keywords" content="{$website['keywords']|default='Niushop开源商城'}">

    <meta name="description" content="{$website['desc']|default='描述'}}">

    <link rel="icon" type="image/x-icon" href="__STATIC__/img/bitbug_favicon.ico" />

    <link rel="stylesheet" type="text/css" href="STATIC_CSS/iconfont.css" />

    <link rel="stylesheet" type="text/css" href="__STATIC__/ext/layui/css/layui.css" />

    <link rel="stylesheet" type="text/css" href="__STATIC__/loading/msgbox.css"/>

    <link rel="stylesheet" type="text/css" href="ADMIN_CSS/common.css" />

    <script src="__STATIC__/js/jquery-3.1.1.js"></script>

    <script src="__STATIC__/ext/layui/layui.js"></script>

    <script>

        layui.use(['layer', 'upload', 'element'], function() {});

        window.ns_url = {

            baseUrl: "ROOT_URL/",

            route: ['{:request()->module()}', '{:request()->controller()}', '{:request()->action()}'],

        };

    </script>

    <script src="__STATIC__/js/common.js"></script>

    <style>

        .ns-calendar{background: url("__STATIC__/img/ns_calendar.png") no-repeat center / 16px 16px;}

    </style>


    <script type="text/javascript">

    </script>

</head>
<script type="text/javascript" src="SHOP_JS/address.js"></script>
<body>
<div class="layui-form">

    <!-- 店铺信息 -->

    <div class="layui-card ns-card-common ns-card-brief">

        <div class="layui-card-header">

            <span class="ns-card-title">代理商编辑</span>

        </div>

        <div class="layui-card-body">

            <div class="layui-form-item">

                <label class="layui-form-label"><span class="required">*</span>账号：</label>

                <div class="layui-input-block">

                    <input name="number" type="text" lay-verify="required" value="{$agent_info.data.number}" class="layui-input ns-len-long" autocomplete="off">

                </div>

            </div>



            <div class="layui-form-item">

                <label class="layui-form-label"><span class="required">*</span>密码：</label>

                <div class="layui-input-block ns-len-mid">

                    <input name="password" type="password"    class="layui-input ns-len-long" autocomplete="off">


                </div>

            </div>


            <div class="layui-form-item">

                <label class="layui-form-label"><span class="required">*</span>客户名称：</label>

                <div class="layui-input-block">

                    <input name="name" type="text" lay-verify="required" value="{$agent_info.data.name}" class="layui-input ns-len-long" autocomplete="off">

                </div>

            </div>


            <div class="layui-form-item">

                <label class="layui-form-label"><span class="required">*</span>区域：</label>

                <div class="layui-input-block">

                    <p class="ns-input-text">{$agent_info.data.region}</p>

                </div>

            </div>



            <div class="layui-form-item">

                <label class="layui-form-label"><span class="required"></span>客户地址：</label>

                <div class="layui-input-block ns-len-mid">

                    <input name="address" type="text" value="{$agent_info.data.address}" class="layui-input ns-len-long" autocomplete="off">


                </div>

            </div>


            <div class="layui-form-item">

                <label class="layui-form-label"><span class="required"></span>客户经理：</label>

                <div class="layui-input-block ns-len-mid">

                    <input name="manager" type="text" value="{$agent_info.data.manager}" class="layui-input ns-len-long" autocomplete="off">


                </div>

            </div>

            <div class="layui-form-item">

                <label class="layui-form-label"><span class="required">*</span>联系人：</label>

                <div class="layui-input-block ns-len-mid">

                    <input name="contacts" type="text" value="{$agent_info.data.contacts}" lay-verify="required" class="layui-input ns-len-long" autocomplete="off">


                </div>

            </div>

            <div class="layui-form-item">

                <label class="layui-form-label"><span class="required"></span>电话：</label>

                <div class="layui-input-block ns-len-mid">

                    <input name="telephone" type="text" value="{$agent_info.data.telephone}" class="layui-input ns-len-long" autocomplete="off">


                </div>

            </div>

            <div class="layui-form-item">

                <label class="layui-form-label"><span class="required">*</span>手机号：</label>

                <div class="layui-input-block ns-len-mid">

                    <input name="phone" type="text" lay-verify="required" value="{$agent_info.data.phone}" class="layui-input ns-len-long" autocomplete="off">


                </div>

            </div>


            <div class="layui-form-item">

                <label class="layui-form-label"><span class="required"></span>邮箱：</label>

                <div class="layui-input-block ns-len-mid">

                    <input name="email" type="text"  class="layui-input ns-len-long" value="{$agent_info.data.email}" autocomplete="off">


                </div>

            </div>

            <div class="layui-form-item">

                <label class="layui-form-label"><span class="required"></span>QQ：</label>

                <div class="layui-input-block ns-len-mid">

                    <input name="qq" type="text"  class="layui-input ns-len-long"  value="{$agent_info.data.qq}" autocomplete="off">
                 <input type="hidden" value="{$agent_info.data.agent_id}" name="agent_id">

                </div>

            </div>
            <div class="layui-form ns-form">

                <div class="layui-form-item">

                    <label class="layui-form-label">是否启用：</label>

                    <div class="layui-input-block">
                       {if $agent_info.data.status==0}
                        <input type="radio" name="status" lay-filter="is_use" value="0" lay-skin="switch" title="启用" checked>
                        <input type="radio" name="status" lay-filter="is_use" value="1" lay-skin="switch" title="禁用">
                        {else /}
                        <input type="radio" name="status" lay-filter="is_use" value="0" lay-skin="switch" title="启用" >
                        <input type="radio" name="status" lay-filter="is_use" value="1" lay-skin="switch" title="禁用" checked>
                        {/if}
                    </div>

                </div>
            <div class="ns-form-row">

                <button class="layui-btn ns-bg-color" lay-submit lay-filter="save">保存</button>

                <button class="layui-btn layui-btn-primary" onclick="back()">返回</button>

            </div>

        </div>
    </div>
</div>

<script>

    layui.use(['form', 'upload'], function() {

        form.on('submit(save)', function(data) {
            data.field.site_area_name = $("select[name=city_id] option:selected").text();
            console.log(data.field);
            $.ajax({
                dataType: 'JSON',

                type: 'POST',

                url: ns.url("saas/agent/edit_agent"),

                data: data.field,
                success: function(res){


                    if (res.code == 0) {

                        layer.msg('修改成功',{icon:6,time:1500});

                    }else{

                        repeat_flag = false;

                        layer.msg(res.message);

                    }

                }

            });

        });

    });

</script>